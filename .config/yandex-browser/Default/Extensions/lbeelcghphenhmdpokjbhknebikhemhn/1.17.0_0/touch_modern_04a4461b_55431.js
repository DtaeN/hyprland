"use strict";(self.webpackChunkv4fire_1=self.webpackChunkv4fire_1||[]).push([[55431],{55431:(e,t,n)=>{n.r(t),n.d(t,{$$:()=>It,ASYNC_RENDER_ID:()=>m.ASYNC_RENDER_ID,ComponentEvent:()=>m.ComponentEvent,ComponentInterface:()=>m.ComponentInterface,ComponentResetType:()=>m.ComponentResetType,ElementModEvent:()=>m.ElementModEvent,ExtraProvider:()=>m.ExtraProvider,ExtraProviders:()=>m.ExtraProviders,FeatureManager:()=>m.FeatureManager,InferComponentEvents:()=>m.InferComponentEvents,InferEvents:()=>m.InferEvents,ModEvent:()=>m.ModEvent,ModEventName:()=>m.ModEventName,ModEventReason:()=>m.ModEventReason,ModEventType:()=>m.ModEventType,ModelMethod:()=>m.ModelMethod,Module:()=>m.Module,PARENT:()=>m.PARENT,ProviderOptions:()=>m.ProviderOptions,RequestBody:()=>m.RequestBody,RequestError:()=>m.RequestError,RequestQuery:()=>m.RequestQuery,RequestResponseObject:()=>m.RequestResponseObject,Response:()=>m.Response,SetElementModEvent:()=>m.SetElementModEvent,SetModEvent:()=>m.SetModEvent,Socket:()=>m.Socket,Theme:()=>m.Theme,V4_COMPONENT:()=>m.V4_COMPONENT,add:()=>m.add,app:()=>m.app,base:()=>m.base,bindRemoteWatchers:()=>m.bindRemoteWatchers,callMethodFromComponent:()=>m.callMethodFromComponent,canSkipWatching:()=>m.canSkipWatching,component:()=>m.component,computed:()=>m.computed,createRequest:()=>m.createRequest,customWatcherRgxp:()=>m.customWatcherRgxp,default:()=>Rt,deleteData:()=>m.deleteData,destroyApp:()=>m.destroyApp,dsComponentsMods:()=>m.dsComponentsMods,extractWebappShortName:()=>m.extractWebappShortName,field:()=>m.field,gc:()=>m.gc,get:()=>m.get,getComponentMods:()=>m.getComponentMods,getComponentName:()=>m.getComponentName,getDefaultRequestParams:()=>m.getDefaultRequestParams,getFieldsStore:()=>m.getFieldsStore,getInfoFromConstructor:()=>m.getInfoFromConstructor,getPropertyInfo:()=>m.getPropertyInfo,globalEmitter:()=>m.globalEmitter,hook:()=>m.hook,init:()=>m.init,initEmitter:()=>m.initEmitter,isAbstractComponent:()=>m.isAbstractComponent,isBinding:()=>m.isBinding,isComponent:()=>m.isComponent,isCustomWatcher:()=>m.isCustomWatcher,isPrivateField:()=>m.isPrivateField,isPropGetter:()=>m.isPropGetter,isSmartComponent:()=>m.isSmartComponent,isStore:()=>m.isStore,modsInitializer:()=>m.modsInitializer,normalizeClass:()=>m.normalizeClass,normalizeStyle:()=>m.normalizeStyle,paramsFactory:()=>m.paramsFactory,peek:()=>m.peek,post:()=>m.post,prop:()=>m.prop,resetComponents:()=>m.resetComponents,rootComponents:()=>m.rootComponents,runHook:()=>m.runHook,statuses:()=>m.statuses,system:()=>m.system,update:()=>m.update,url:()=>m.url,wait:()=>m.wait,watch:()=>m.watch});var r={};n.r(r),n.d(r,{adsBetweenRowsProcessor:()=>ve,adsContentProcessor:()=>be,adsFillerProcessor:()=>ye,adsIncut:()=>M,adsLastSlotProcessor:()=>Se,adsProcessor:()=>fe,analyticsAccessPermission:()=>L,analyticsCard:()=>I,analyticsCardPosition:()=>S,analyticsCardPositionProp:()=>P,analyticsCbBlock:()=>D,analyticsCbBlockCard:()=>j,analyticsCbCardPosition:()=>C,analyticsCollection:()=>R,analyticsCompilation:()=>E,analyticsCouponCard:()=>x,analyticsCpsRetailers:()=>O,analyticsNPSBlock:()=>A,analyticsRetailerButton:()=>w,bSrchCardSizeExp1:()=>Ue,bSrchCardSizeExp2:()=>We,bSrchCardSizeL:()=>Qe,bSrchCardSizeM:()=>He,bSrchCardSizeS:()=>Ke,bSrchCardSizeXL:()=>Ge,bkoComponentBox:()=>k,bkoDefBox:()=>$,bkoFeed:()=>q,catsSlider:()=>Xe,cbCard:()=>_e,cbCardsWithAdsAndPagination:()=>gt,cbCondensedCards:()=>je,cbDynamicCards:()=>De,cbTypesToCats:()=>et,couponsOfferwall:()=>Ye,cpsCard:()=>Ne,cpsCollectionsSlider:()=>nt,cpsCompilation:()=>$e,cpsCompilationDynamic:()=>ke,cpsDynamicCards:()=>Le,cpsOfferwallFiltersToCatsLessy:()=>tt,cpsV2ListPagination:()=>bt,defaultCard:()=>Ct,dynamicCards:()=>Oe,dynamicCardsSlider:()=>we,dynamicOffers:()=>Me,dynamicOffersSlider:()=>Fe,elementsWithToggle:()=>Ve,frezkoPagination:()=>vt,pagination:()=>st,paginationCollections:()=>it,paginationCucumberCollections:()=>dt,paginationGoodsSegments:()=>lt,paginationOffers:()=>mt,paginationOffersSlider:()=>ut,paginationPrizeCollections:()=>ht,paginationShops:()=>ct,paginationSlider:()=>at,paginationStaticData:()=>pt,promoDynamicCards:()=>qe,segmentToCats:()=>Ze,shopsCard:()=>Be,shopsData:()=>yt,srchDynamicCards:()=>Ee,srchPaginationCpsSlider:()=>ft,verticalFeed:()=>Te,waitForCats:()=>St});var o=n(31635),s=n(66454),a=n(73756),i=n(59838),l=n(44246),c=n(82740),d=n(44722),u=n(2558),m=n(40048),p=n(48665),h=n(40948),g=n(8657);const f=g.default.namespace("funcResolver");class FuncResolver{constructor(e){this.mapCache={},this.component=e.unsafe}get fromPath(){if(Object.isString(this.func)){const e=this.component.field.get(this.func);e||f.warn("fromPath",`Can't find function '${this.func}'`),this.func=e}return this}get bound(){if(Object.isFunction(this.func))return this.func.bind(this.component)}for(e){return this.func=e,this}map(e){const t=Object.fastHash(this.func);return Object.isTruly(this.mapCache[t])||(this.mapCache[t]=Array.concat([],this.func).map((t=>e(this.for(t)))).filter(Boolean)),this.mapCache[t]}tryCall(...e){return Object.isFunction(this.func)&&(this.func=this.func.apply(this.component,e)),this}}var b=n(84624);function v(e=1/0,t=!1){return(n,r,o)=>{const s=o.get;if(!Object.isFunction(s))throw new TypeError("descriptor.get is not a getter");const a={executionTime:0,result:null},i=new WeakMap;o.get=function(){const n=Date.now();let r=a;return t&&(r=i.has(this)?i.get(this):{...a},i.has(this)||i.set(this,r)),(null==r.result||n-r.executionTime>e.seconds())&&(r.result=s.call(this),r.executionTime=n),r.result}}}class MeasurePosition{constructor(e,t){this.node=e,this.cardSelector=t}static getInstance(e,t=`${b.A.selector}, .b-srch-card, .b-cat`){const n=e;if(this.instances.has(n))return this.instances.get(n);const r=new MeasurePosition(n,t);return this.instances.set(n,r),r}get position(){return this.elementInsideSlider||!this.elementInsideRenderer?(this.node.getIndex()??0)+1:this.nodes.indexOf(this.block)+1}get parent(){var e;const t=null===(e=this.node.parentElement)||void 0===e?void 0:e.closest(MeasurePosition.BLOCK_SELECTOR);return t?MeasurePosition.getInstance(t,this.cardSelector):null}get isLast(){if(this.elementInsideSlider||!this.elementInsideRenderer)return!this.node.nextElementSibling;const{nodes:e}=this;return!e[e.indexOf(this.block)+1]}get elementInsideSlider(){return this.elementIsCard&&Boolean(this.node.closest(MeasurePosition.SLIDER_SELECTOR))}get elementInsideRenderer(){return Boolean(this.node.closest(".b-page-renderer"))}get elementIsCard(){return Boolean(this.node.closest(this.cardSelector))}get nodes(){const e=Array.from(document.querySelectorAll(MeasurePosition.BLOCK_SELECTOR));return 0!==e.length?e:Array.from(document.querySelectorAll(this.cardSelector))}get block(){return this.node.matches(MeasurePosition.BLOCK_SELECTOR)?this.node:this.node.closest(MeasurePosition.BLOCK_SELECTOR)}}MeasurePosition.BLOCK_SELECTOR=[`.b-vertical-box ${b.A.selector}`,".b-def-box [data-positioner=true]",".b-compilation-box",".b-srch-card"].join(","),MeasurePosition.SLIDER_SELECTOR=[".b-slider-box",".b-compilation-box"].join(","),MeasurePosition.instances=new WeakMap,(0,o.Cg)([v(1/0,!0)],MeasurePosition.prototype,"parent",null),(0,o.Cg)([v(1/0,!0)],MeasurePosition.prototype,"elementInsideSlider",null),(0,o.Cg)([v(1/0,!0)],MeasurePosition.prototype,"elementInsideRenderer",null),(0,o.Cg)([v(1/0,!0)],MeasurePosition.prototype,"elementIsCard",null),(0,o.Cg)([v(.01)],MeasurePosition.prototype,"nodes",null),(0,o.Cg)([v(1/0,!0)],MeasurePosition.prototype,"block",null);const y=(0,a.A)(["listenReady","listenDestroy"]);class Analytics{constructor(e){this.componentMap=Object.createDict(),this.box=e,this.initEvents()}getComponentAnalyticsData(e){const t=e[e.dataPointer]||{};return Object.get(t,"analytics")}getAnalyticsModule(e){return e.analytics}getComponentNode(e){return e.unsafe.$el}getComponentRoot(e){return e.r}getComponent(e,t=0){return Object.cast(this.componentMap[`${e}${t}`])}register(e,t,n=0){const r=`${t}${n}`;this.componentMap[r]=e.unsafe,e.on("componentStatus:ready",(()=>this.componentMap[r]=e.unsafe),{label:y.listenReady}),e.on("componentStatus:destroyed",(()=>delete this.componentMap[r]),{label:y.listenDestroy})}initEvents(){const{box:e,box:{params:t}}=this;t&&(t.boxAnalyticsCtx=(e,t)=>this.register(e,"box",t),t.elementAnalyticsCtx=(e,t)=>this.register(e,"element",t),Object.forEach(t.analytics,((n,r)=>{t.attrs||(t.attrs={}),this.bindEventsToAttrs(t,n,r,e)})))}bindEventsToAttrs(e,t,n,r){const o={click:"analyticsClick",view:"analyticsView",appear:"analyticsAppear"},s=(e,t,n,r)=>this.sendAnalytics(e,t,n,r);Object.forEach(t.counters,((a,i)=>{const l=`${"element"===n?"element_":"box_"}${o[i]}`.camelize(!1);if("view"===i&&(e[l]={handler:e=>s(n,e,t,"view"),...this.getInViewParams(r,n,a),...Object.isPlainObject(a)?a:{}}),"click"===i){let r=!1;e[l]=e=>{if(!(r&&Object.isPlainObject(a)&&a.once))return r=!0,s(n,e,t,"click")}}"appear"===i&&(e[l]=e=>s(n,e,t,"appear"))}))}getInViewParams(e,t,n){const r={},{component:o}=e;return"b-slider-box"!==o&&"b-compilation-box"!==o||"element"!==t||(r.polling=!0),{delay:2e3,threshold:.7,once:!Object.isBoolean(n)&&n.once,...r}}buildAnalytics(e,t,n){const{params:r}=t,{name:o}=r,s=this.getComponentRoot(e),a={};return r.position&&(a.Position=e=>MeasurePosition.getInstance(e.$el).position,a.isLast=e=>MeasurePosition.getInstance(e.$el).isLast),t.fields&&s&&Object.forEach(t.fields,((e,t,n)=>{s.finder.isFinderQuery(e)&&(n[t]=s.finder.find(e,this.box))})),{name:`${o}${n.camelize()}`,data:{...a,...t.fields}}}sendAnalytics(e,t,n,r){const o=this.getComponent(e,t);if(!o)return;const s=this.getComponentAnalyticsData(o),a=this.getAnalyticsModule(o),{params:{name:i}}=n,{data:l}=this.buildAnalytics(o,n,r),c={...l,...s};Object.forEach(c,((e,t)=>{Object.isFunction(e)&&(c[t]=e.call(c,o))})),a.sendEvent(r,c,i)}}function S(){return{elementAttrs:{externalAnalyticsParams:{position:(e,t)=>MeasurePosition.getInstance(t.$el).position,compilationPosition:(e,t)=>{var n;return null===(n=MeasurePosition.getInstance(t.$el).parent)||void 0===n?void 0:n.position}}}}}function C(){let e=1;return{elementAttrs:{externalAnalyticsParams:(t,n,{ctx:r})=>{const{lastLoadedRawData:o,isLastRender:s,isInitialRender:a}=r.getVirtualScrollState();a&&0===n&&(e=1);const i=Object.cast(o),l=e++;return{position:l,isLast:s&&i.total===l}}}}}function P(){return{elementAttrs:{externalAnalyticsParams:{position:(e,t)=>MeasurePosition.getInstance(t.$el).position}}}}function I({normalizedBox:e,sourceBox:t}){const n=Object.get(t,"params.namespace")??this.r.namespace;const r=this.field.get.bind(this.field),o=e;return{elementAttrs:{analyticsEvents:["click","view","appear"],fields:{ScreenName:this.analytics.currentScreen,FromScreen:Object.get(this,"route.query.fromScreen"),CompilationUuid:()=>r("params.parent.uuid",o)||r("params.uuid",o)||r("route.query.compilationUuid"),CompilationSlug:()=>r("params.parent.slug",o)||r("params.slug",o)||r("route.query.compilationSlug"),CollectionUuid:r("route.query.collectionUuid"),CollectionSlug:r("route.query.collectionSlug"),[`${n}Uuid`]:e=>e.field.get("data.uuid")??""}}}}function x({normalizedBox:e,sourceBox:t}){const n=I.call(this,{normalizedBox:e,sourceBox:t}),r=e,o=this.field.get.bind(this.field);return{elementAttrs:{...n.elementAttrs,externalAnalyticsParams:{...n.elementAttrs.externalAnalyticsParams,position:(e,t)=>MeasurePosition.getInstance(t.$el).position,compilationPosition:(e,t)=>{var n;return null===(n=MeasurePosition.getInstance(t.$el).parent)||void 0===n?void 0:n.position},isLast:(e,t)=>{const n=MeasurePosition.getInstance(t.$el);var r;return n.elementInsideSlider?null===(r=n.parent)||void 0===r?void 0:r.isLast:n.isLast},isLastInCompilation:(e,t)=>{const n=MeasurePosition.getInstance(t.$el);if(n.elementInsideSlider)return n.isLast},Source:(e,t)=>t.field.get("data.source"),compilationUuid:()=>o("params.parent.uuid",r)||o("params.uuid",r)||o("route.query.compilationUuid"),compilationSlug:()=>o("params.parent.slug",r)||o("params.slug",r)||o("route.query.compilationSlug")}}}}function R({normalizedBox:e,sourceBox:t}){const n=Object.get(t,"params.namespace")??this.r.namespace;const r=Object.get(this,"route.query.fromScreen");return{analytics:{box:{counters:{view:!0},params:{name:`${n}Collection`},fields:{ScreenName:this.analytics.currentScreen,FromScreen:r,CollectionSlug:()=>Object.get(e,"params.slug"),CollectionUuid:()=>Object.get(e,"params.uuid")}},element:{counters:{view:!0},params:{name:`${n}CollectionIcon`,position:"index"},fields:{ScreenName:this.analytics.currentScreen,FromScreen:r}}}}}function O({normalizedBox:e,sourceBox:t}){const n=Object.get(t,"params.namespace")??this.r.namespace;return{attrs:{"v-analytics":{events:["appear"],params:{eventName:`${n}Retailers`,FromScreen:Object.get(this,"route.query.fromScreen"),CarouselSlug:()=>Object.get(e,"params.slug"),CarouselUUID:()=>Object.get(e,"params.uuid")}}},elementAttrs:{analyticsEvents:["click","appear"],externalAnalyticsParams:{xPosition:(e,t)=>MeasurePosition.getInstance(t.$el).position,isLast:(e,t)=>MeasurePosition.getInstance(t.$el).isLast,eventName:`${n}RetailerIcon`,fromScreen:Object.get(this,"route.query.fromScreen")}}}}function E({normalizedBox:e,sourceBox:t}){const n=Object.get(t,"params.namespace")??this.r.namespace;const r=this.field.get.bind(this.field);return{analytics:{box:{counters:{view:!0},params:{name:`${n}Compilation`,position:!0},fields:{position:e=>MeasurePosition.getInstance(e.$el).position,isLast:e=>MeasurePosition.getInstance(e.$el).isLast,ScreenName:this.analytics.currentScreen,FromScreen:r("route.query.fromScreen"),CompilationSlug:()=>r("params.slug",e)||r("params.parent.slug",e),CompilationUuid:()=>r("params.uuid",e)||r("params.request.partnerUuid",e),BgColor:()=>r("params.mainColor",e)||r("params.parent.mainColor",e),TagName:()=>r("params.title.main",e)||r("params.parent.title.main",e),Logo:()=>(r("params.title.icon",e)||r("params.parent.title.icon",e)||"").replace(/^.*\/([^/]+)$/,"$1")}}}}}function A(){return{attrs:{externalAnalyticsParams:this.externalAnalyticsParams}}}function D({sourceBox:e}){var t;return{vAnalytics:{events:["appear"],params:{eventName:"CBBlock",blockSlug:null===(t=e.params)||void 0===t?void 0:t.slug},options:{inViewOptions:{threshold:.25}}}}}function j({normalizedBox:e}){return{elementAttrs:{externalAnalyticsParams:{blockSlug:()=>{var t,n;return null===(n=e.params)||void 0===n||null===(t=n.parent)||void 0===t?void 0:t.slug},xPosition:(e,t)=>MeasurePosition.getInstance(t.$el).position}}}}function w(){return{attrs:{externalAnalyticsParams:{requestId:this.externalAnalyticsParams.requestId,slug:"openRetailerCatalog"}}}}function L(){return{attrs:{externalAnalyticsParams:{requestId:this.externalAnalyticsParams.requestId}}}}function k({sourceBox:e}){const t=(this.field.get("params.additional",e)??{}).analyticsParams??{};return{style:{marginTop:"0px"},attrs:{externalAnalyticsParams:{...this.externalAnalyticsParams,...t}}}}function $({sourceBox:e}){const t=e.params??{},n=(t.additional??{}).analyticsParams??{};return{style:{marginTop:"6px"},offset:{content:"zero"},title:{...t.title,vAnalytics:{events:["appear"],params:{eventName:"InsetBlock",...n,...this.externalAnalyticsParams},options:{inViewOptions:{once:!0}}}}}}function q({sourceBox:e}){const t=this.$parent,n=this.field.get("params.additional",e)??{},r=n.analyticsParams??{};return{elementAttrs:{openOnClick:!0,externalAnalyticsParams:{...t.externalAnalyticsParams,...r,chunkRequestId:r.requestId,[(!0===n.horizontal?"x":"")+"Position"]:(e,t)=>MeasurePosition.getInstance(t.$el).position}}}}var B=n(56987);function M({sourceBox:e}){var t,n,r,o,s;const a={banners:null===(r=e.params)||void 0===r||null===(n=r.attrs)||void 0===n||null===(t=n.banners)||void 0===t?void 0:t.data};if(null==a.banners)return{};return{attrs:{banners:(0,B.postProcessAds)(a).getAdsByParams({screen:Object.cast(null===(s=e.params)||void 0===s||null===(o=s.attrs)||void 0===o?void 0:o.screen)})}}}var F=n(94715);const T="b-virtual-scroll-new",V=`${T}:dom-insert`,z=`${T}:first-chunk-render`,N=`${T}:vdom-render`,_="items",U="dataProvider",W={dataLoadStart:"dataLoadStart",dataLoadError:"dataLoadError",dataLoadSuccess:"dataLoadSuccess",dataLoadEmpty:"dataLoadEmpty",renderStart:"renderStart",renderDone:"renderDone",renderEngineStart:"renderEngineStart",renderEngineDone:"renderEngineDone",domInsertStart:"domInsertStart",domInsertDone:"domInsertDone",resetState:"resetState",convertDataToDB:"convertDataToDB",lifecycleDone:"lifecycleDone",elementEnter:"elementEnter"},K="renderCycleDone",H="notEnoughData",Q="done",G="noPermission",Y="item",X={shouldStopRequestingData:(e,t)=>0===e.lastLoadedData.length,shouldPerformDataRender:(e,t)=>e.isInitialRender||0===e.remainingItems};let J=class iVirtualScrollProps extends m.default{constructor(){super(...arguments),this.itemType=Y,this.chunkSize=10,this.preloadAmount=0,this.disableObserver=!1}};(0,o.Cg)([(0,m.prop)({type:[String,Function]})],J.prototype,"item",void 0),(0,o.Cg)([(0,m.prop)({type:Array,required:!1})],J.prototype,"items",void 0),(0,o.Cg)([(0,m.prop)({type:[String,Function]})],J.prototype,"itemKey",void 0),(0,o.Cg)([(0,m.prop)({type:[String,Function]})],J.prototype,"itemType",void 0),(0,o.Cg)([(0,m.prop)({type:[Function,Object],default:()=>({})})],J.prototype,"itemProps",void 0),(0,o.Cg)([(0,m.prop)({required:!1})],J.prototype,"itemMeta",void 0),(0,o.Cg)([(0,m.prop)({type:Number,required:!1})],J.prototype,"tombstoneCount",void 0),(0,o.Cg)([(0,m.prop)({type:Function,default:(e,t)=>t.getNextDataSlice(e,t.getChunkSize(e)).map(((e,n)=>{var r,o;return{key:null===(r=t.itemKey)||void 0===r?void 0:r.call(t,e,n),item:Object.isFunction(t.item)?t.item(e,n):t.item,type:Object.isFunction(t.itemType)?t.itemType(e,n):t.itemType,meta:{data:e,...Object.isFunction(t.itemMeta)?t.itemMeta(e,n):t.itemMeta},props:Object.isFunction(t.itemProps)?t.itemProps(e,n,{key:null===(o=t.itemKey)||void 0===o?void 0:o.call(t,e,n),ctx:t}):t.itemProps}}))})],J.prototype,"itemsFactory",void 0),(0,o.Cg)([(0,m.prop)({type:[Function,Object,Array],default:{}})],J.prototype,"itemsProcessors",void 0),(0,o.Cg)([(0,m.prop)({type:Function,required:!1})],J.prototype,"requestQuery",void 0),(0,o.Cg)([(0,m.prop)({type:[Number,Function]})],J.prototype,"chunkSize",void 0),(0,o.Cg)([(0,m.prop)({type:[Number,Function]})],J.prototype,"preloadAmount",void 0),(0,o.Cg)([(0,m.prop)({type:Function,default:X.shouldStopRequestingData})],J.prototype,"shouldStopRequestingData",void 0),(0,o.Cg)([(0,m.prop)({type:Function,default:X.shouldPerformDataRender})],J.prototype,"shouldPerformDataRender",void 0),(0,o.Cg)([(0,m.prop)(Boolean)],J.prototype,"disableObserver",void 0),J=(0,o.Cg)([(0,m.component)({partial:"bVirtualScrollNew",layer:"@v4fire/client"})],J);const Z=J,ee=(0,a.A)(["waitUntilRenderDone"]);var te=n(8499);function ne(e){return Object.isPlainObject(e)&&e.type===Y}class ComponentInternalState extends te.A{constructor(){super(...arguments),this.state={loadPage:0,renderPage:0,remainingItems:void 0,remainingChildren:void 0,maxViewedItem:void 0,maxViewedChild:void 0,data:[],lastLoadedData:[],lastLoadedRawData:void 0,isLastEmpty:!1,isInitialLoading:!0,items:[],childList:[],isInitialRender:!0,areRequestsStopped:!1,isLoadingInProgress:!1,isLifecycleDone:!1,isLastErrored:!1,isLastRender:!1,isTombstonesInView:!1,dataOffset:0},this.privateState={isDomInsertInProgress:!1}}compile(){return this.state}reset(){this.state={loadPage:0,renderPage:0,remainingItems:void 0,remainingChildren:void 0,maxViewedItem:void 0,maxViewedChild:void 0,data:[],lastLoadedData:[],lastLoadedRawData:void 0,isLastEmpty:!1,isInitialLoading:!0,items:[],childList:[],isInitialRender:!0,areRequestsStopped:!1,isLoadingInProgress:!1,isLifecycleDone:!1,isLastErrored:!1,isLastRender:!1,isTombstonesInView:!1,dataOffset:0},this.privateState={isDomInsertInProgress:!1}}incrementLoadPage(){this.state.loadPage++}incrementRenderPage(){this.state.renderPage++}updateData(e,t){this.state.data=this.state.data.concat(e),this.state.isLastEmpty=0===e.length,this.state.isInitialLoading=t,this.state.lastLoadedData=e}updateMounted(e){const{state:t}=this,n=t.childList,r=t.items,o=e.filter((e=>"item"===e.type));n.push(...e),r.push(...o),this.updateRemainingChildren()}updateIsLastRender(){const{state:e,ctx:t}=this;if(!e.areRequestsStopped)return;const n=t.getChunkSize(e),r=this.getDataOffset()+n;null==e.data[r]&&(e.isLastRender=!0)}setRawLastLoaded(e){this.state.lastLoadedRawData=e}setIsInitialRender(e){this.state.isInitialRender=e}setIsDomInsertInProgress(e){this.privateState.isDomInsertInProgress=e}setIsRequestsStopped(e){this.state.areRequestsStopped=e}setIsTombstonesInView(e){this.state.isTombstonesInView=e}setIsLifecycleDone(e){this.state.isLifecycleDone=e}setIsLoadingInProgress(e){this.state.isLoadingInProgress=e}setIsLastErrored(e){this.state.isLastErrored=e}setMaxViewedIndex(e){const{state:t}=this,{childIndex:n}=e;ne(e)&&(null==t.maxViewedItem||t.maxViewedItem<e.itemIndex)&&(t.maxViewedItem=e.itemIndex,t.remainingItems=t.items.length-1-t.maxViewedItem),(null==t.maxViewedChild||t.maxViewedChild<n)&&(t.maxViewedChild=e.childIndex,t.remainingChildren=t.childList.length-1-t.maxViewedChild),this.updateRemainingChildren()}getDataOffset(){return this.state.dataOffset}getIsDomInsertInProgress(){return this.privateState.isDomInsertInProgress}updateDataOffset(){const{ctx:e,state:t}=this,n=this.getDataOffset(),r=e.getChunkSize(t);this.state.dataOffset=n+r}updateRemainingChildren(){const{state:e}=this;null==e.maxViewedChild?e.remainingChildren=e.childList.length-1:e.remainingChildren=e.childList.length-1-e.maxViewedChild,null==e.maxViewedItem?e.remainingItems=e.items.length-1:e.remainingItems=e.items.length-1-e.maxViewedItem}}const re=(0,a.A)(["updateSlotsVisibility"]),oe="slotsStateController";class SlotsStateController extends te.A{constructor(){super(...arguments),this.asyncUpdateLabel={label:re.updateSlotsVisibility,group:oe}}emptyState(){const{isInitialRender:e}=this.ctx.getVirtualScrollState();this.setSlotsVisibility({container:!e,done:!0,empty:!0,loader:!1,renderNext:!1,retry:!1,tombstones:!1})}doneState(){var e;const{isInitialRender:t}=this.ctx.getVirtualScrollState();this.setSlotsVisibility({container:!t,done:!0,empty:(null===(e=this.lastState)||void 0===e?void 0:e.empty)??!1,loader:!1,renderNext:!1,retry:!1,tombstones:!1})}loadingProgressState(e=!1){const{isInitialRender:t}=this.ctx.getVirtualScrollState();this.setSlotsVisibility({container:!t,loader:!0,tombstones:!0,done:!1,empty:!1,renderNext:!1,retry:!1},e)}loadingFailedState(){const{isInitialRender:e}=this.ctx.getVirtualScrollState();this.setSlotsVisibility({container:!e,retry:!0,done:!1,empty:!1,loader:!1,renderNext:!1,tombstones:!1})}loadingSuccessState(e=!1){this.setSlotsVisibility({container:!0,done:!1,empty:!1,loader:!1,renderNext:!0,retry:!1,tombstones:!1},e)}reset(){this.async.clearAll({group:new RegExp(oe)}),this.lastState=void 0}setSlotsVisibility(e,t=!1){this.lastState=e,this.async.cancelAnimationFrame(this.asyncUpdateLabel);const n=()=>{for(const[t,n]of Object.entries(e))this.setDisplayState(t,n)};if(t)return n();this.async.requestAnimationFrame(n,this.asyncUpdateLabel)}setDisplayState(e,t){const n=this.ctx.$refs[e];n instanceof HTMLElement&&(n.style.display=t?"":"none")}}class ComponentFactory extends te.A{produceComponentItems(){const{ctx:e}=this,t=this.normalizeComponentItem.bind(this),n=e.itemsFactory(e.getVirtualScrollState(),this.component);return this.itemsProcessor(n).map(t)}produceNodes(e){if(0===e.length)return[];const t=e.map((e=>({type:e.item,attrs:e.props,children:e.children})));return this.callRenderEngine(t)}produceMounted(e,t){const{ctx:n}=this,{items:r,childList:o}=n.getVirtualScrollState();let s=0;return e.map(((e,n)=>{if(ne(e)){const a={...e,node:t[n],itemIndex:r.length+s,childIndex:o.length+n};return s++,a}return{...e,node:t[n],childIndex:r.length+n}}))}itemsProcessor(e){const{ctx:t,component:n}=this,r=t.getItemsProcessors();return r?Object.isFunction(r)?r(e,n):(Object.forEach(r,(t=>{e=t(e,n)})),e):e}normalizeComponentItem(e){const{item:t,props:n}=e;return e.props=n?this.normalizeComponentItemProps(t,n):n,e}normalizeComponentItemProps(e,t){const n=(0,l.registerComponent)(e);return null==n?t:Object.entries(t).reduce(((e,[t,r])=>{var o,s;const a=!1===(null===(o=n.props[t])||void 0===o?void 0:o.forceUpdate)||!1===(null===(s=n.props[`${t}Prop`])||void 0===s?void 0:s.forceUpdate);return e[a?`@:${t}`:t]=a?this.ctx.createPropAccessors((()=>r)):r,e}),{})}callRenderEngine(e){const{ctx:t}=this;t.onRenderEngineStart();const n=function(e,t){const{renderPage:n}=e.getVirtualScrollState(),r=e.vdom.create(...t);return e.vdom.render(r,`${N}:${n}`)}(this.component,e);return t.onRenderEngineDone(),n}}const se="[[OBSERVER]]";class IoObserver extends te.A{watchForIntersection(e){const{ctx:t}=this;for(const n of e)t.dom.watchForIntersection(n.node,{group:se,label:n.childIndex.toString(),once:!0,threshold:1e-5,delay:0},(()=>t.onElementEnters(n)))}reset(){this.async.clearAll({group:new RegExp(se)})}}class Observer extends te.A{constructor(e){super(e),this.engine=new IoObserver(e)}observe(e){const{ctx:t}=this;t.disableObserver||this.engine.watchForIntersection(e)}reset(){this.engine.reset()}}const ae=(0,a.A)(["initLoad","initLoadNext","insertDomRaf","firstChunkRender"]);F.Ay.addToPrototype({watchForIntersection:F.Gf}),d.default.addToPrototype({create:d.create,render:d.render});let ie=class bVirtualScrollNew extends Z{constructor(){super(...arguments),this.firstChunkItems=[]}get componentEmitter(){return e=this.unsafe,{once:(t,n,r)=>{e.once(t,n,r)},on:(t,n,r)=>{e.on(t,n,r)},promisifyOnce:(t,n)=>e.promisifyOnce(t,n),emit:(t,...n)=>{e.emit(t,...n)}};var e}get slotsStateController(){return new SlotsStateController(this)}get componentInternalState(){return new ComponentInternalState(this)}get componentFactory(){return new ComponentFactory(this)}get observer(){return new Observer(this)}get requestParams(){var e,t,n,r;return{get:{...null===(t=this.requestQuery)||void 0===t||null===(e=t.call(this,this.getVirtualScrollState()))||void 0===e?void 0:e.get,...Object.isDictionary(null===(n=this.request)||void 0===n?void 0:n.get)?null===(r=this.request)||void 0===r?void 0:r.get:void 0}}}get unsafe(){return Object.cast(this)}get componentMode(){return this.items?_:U}initLoadNext(){if(!this.dataProvider)throw ReferenceError("Missing dataProvider");if(this.getVirtualScrollState().isLoadingInProgress)return;if(null==this.db)return this.initLoad();this.onDataLoadStart(!1);const e=this.getRequestParams();return this.dataProvider.get(e[0],{...e[1],showProgress:!1}).then((e=>{this.onDataLoadSuccess(!1,this.convertDataToDB(e))})).catch(stderr)}getVirtualScrollState(){return this.componentInternalState.compile()}getNextDataSlice(e,t){const n=this.componentInternalState.getDataOffset(),r=n+t;return e.data.slice(n,r)}getChunkSize(e){return Object.isFunction(this.chunkSize)?this.chunkSize(e,this):this.chunkSize}getPreloadAmount(e){return Object.isFunction(this.preloadAmount)?this.preloadAmount(e,this):this.preloadAmount}getItemsProcessors(){return this.itemsProcessors}reload(...e){return this.componentStatus="loading",super.reload(...e)}initLoad(...e){this.lfc.isBeforeCreate()||this.reset(),this.componentInternalState.setIsLoadingInProgress(!0);const t=super.initLoad(...e),n=Object.isPromise(t)?t:s.Ay.resolve(),r=this.async.promise(n,{label:ae.initLoad,group:T,join:"replace"});if(this.componentMode===_)return r.then((()=>this.initItems())).catch(stderr);this.onDataLoadStart(!0),r.then((()=>{null!=this.db&&this.onDataLoadSuccess(!0,this.db)})).catch(stderr)}initItems(){this.componentMode===_&&this.items&&this.onItemsInit(this.items)}onRequestError(...e){const t=e[0];if(n=t,Object.isPlainObject(n)&&"replace"===n.join)return;var n;const r=this.getVirtualScrollState();return this.onDataLoadError(r.isInitialLoading),super.onRequestError(t,this.initLoad.bind(this))}convertDataToDB(e){this.onConvertDataToDB(e);return super.convertDataToDB(e)}getRequestParams(){var e;const t={label:ae.initLoadNext,group:T,join:"replace"},n=null===(e=this.dataProvider)||void 0===e?void 0:e.getDefaultRequestParams("get");return Array.isArray(n)&&Object.assign(n[1],t),n}shouldStopRequestingDataWrapper(){if(this.componentMode===_)return this.componentInternalState.setIsRequestsStopped(!0),!0;const e=this.getVirtualScrollState();if(e.areRequestsStopped)return e.areRequestsStopped;const t=this.shouldStopRequestingData(e,this);return this.componentInternalState.setIsRequestsStopped(t),t}reset(){this.onReset()}renderGuard(e){var t;const n=this.getChunkSize(e);if(this.getNextDataSlice(e,n).length<n){var r;if(e.areRequestsStopped&&e.isLastRender)return{result:!1,reason:Q};const t=(null===(r=this.shouldPerformDataRender)||void 0===r?void 0:r.call(this,e,this))??!0;return t?{result:!1,reason:H}:{result:t,reason:G}}if(e.isInitialRender)return{result:!0};const o=(null===(t=this.shouldPerformDataRender)||void 0===t?void 0:t.call(this,e,this))||e.isTombstonesInView;return{result:o,reason:o?void 0:G}}loadDataOrPerformRender(){const e=this.getVirtualScrollState();if(e.isLastErrored)return;const{result:t,reason:n}=this.renderGuard(e);switch(t&&this.performRender(),n){case Q:this.onLifecycleDone();break;case H:if(e.areRequestsStopped)return this.performRender(),void this.onLifecycleDone();this.initLoadNext();break;default:{const t=this.getPreloadAmount(e),n=this.componentInternalState.getDataOffset();!e.areRequestsStopped&&e.data.length-n-t<0&&this.initLoadNext()}}}performRender(){this.onRenderStart();const e=this.componentFactory.produceComponentItems(),{renderPage:t,isInitialRender:n}=this.getVirtualScrollState();if(n)return this.performFirstChunkRender(e);const r=this.componentFactory.produceNodes(e),o=this.componentFactory.produceMounted(e,r);if(0===o.length)return this.onRenderDone();this.observer.observe(o),this.onDomInsertStart(o);const s=document.createDocumentFragment(),a=`${V}:${t}`;r.forEach((e=>{this.dom.appendChild(s,e,{group:a,destroyIfComponent:!0})})),this.componentInternalState.setIsDomInsertInProgress(!0),this.async.requestAnimationFrame((()=>{const e=this.getVirtualScrollState();this.slotsStateController.loadingSuccessState(!0),e.isLoadingInProgress&&this.slotsStateController.loadingProgressState(),this.$refs.container.appendChild(s),this.componentInternalState.setIsDomInsertInProgress(!1),this.onDomInsertDone(),this.onRenderDone()}),{label:ae.insertDomRaf,group:a})}performFirstChunkRender(e){this.onRenderEngineStart(),this.field.set("firstChunkItems",e),this.onRenderEngineDone(),this.componentInternalState.setIsDomInsertInProgress(!0);const t=z;this.nextTick({label:ae.firstChunkRender,group:t}).then((()=>{this.componentInternalState.setIsDomInsertInProgress(!1);let t=[];t=this.componentFactory.produceMounted(e,Array.from(this.$refs.container.children)),this.observer.observe(t),this.onDomInsertStart(t),this.onDomInsertDone(),this.onRenderDone()})).catch(stderr)}};(0,o.Cg)([(0,m.computed)({cache:"forever"})],ie.prototype,"componentEmitter",null),(0,o.Cg)([(0,m.computed)({cache:"forever"})],ie.prototype,"slotsStateController",null),(0,o.Cg)([(0,m.computed)({cache:"forever"})],ie.prototype,"componentInternalState",null),(0,o.Cg)([(0,m.computed)({cache:"forever"})],ie.prototype,"componentFactory",null),(0,o.Cg)([(0,m.computed)({cache:"forever"})],ie.prototype,"observer",null),(0,o.Cg)([(0,m.field)()],ie.prototype,"firstChunkItems",void 0),(0,o.Cg)([(0,m.watch)({path:"items",provideArgs:!1})],ie.prototype,"initLoad",null),(0,o.Cg)([(0,m.wait)({defer:!0})],ie.prototype,"initItems",null),ie=(0,o.Cg)([(0,m.component)({layer:"@v4fire/client"}),(0,i.C)(class iVirtualScrollHandlers{static onReset(e){e.componentInternalState.reset(),e.observer.reset(),e.async.clearAll({group:new RegExp(T)}),e.componentEmitter.emit(W.resetState)}static onRenderStart(e){e.componentInternalState.updateIsLastRender(),e.componentEmitter.emit(W.renderStart)}static onRenderEngineStart(e){e.componentEmitter.emit(W.renderEngineStart)}static onRenderEngineDone(e){e.componentEmitter.emit(W.renderEngineDone)}static onDomInsertStart(e,t){e.componentInternalState.updateDataOffset(),e.componentInternalState.updateMounted(t),e.componentInternalState.setIsInitialRender(!1),e.componentInternalState.incrementRenderPage(),e.componentEmitter.emit(W.domInsertStart)}static onDomInsertDone(e){e.componentEmitter.emit(W.domInsertDone)}static onRenderDone(e){e.componentEmitter.emit(W.renderDone),e.localEmitter.emit(K)}static onLifecycleDone(e){const t=e.getVirtualScrollState(),n=e.componentInternalState.getIsDomInsertInProgress();if(t.isLifecycleDone)return;const r=()=>{e.slotsStateController.doneState(),e.componentInternalState.setIsLifecycleDone(!0),e.componentEmitter.emit(W.lifecycleDone)};if(!n)return r();e.localEmitter.once(K,r,{group:T,label:ee.waitUntilRenderDone})}static onConvertDataToDB(e,t){e.componentInternalState.setRawLastLoaded(t),e.componentEmitter.emit(W.convertDataToDB,t)}static onDataLoadStart(e,t){e.componentInternalState.setIsLoadingInProgress(!0),e.componentInternalState.setIsLastErrored(!1),e.slotsStateController.loadingProgressState(t),e.componentEmitter.emit(W.dataLoadStart,t)}static onDataLoadSuccess(e,t,n){e.componentInternalState.setIsLoadingInProgress(!1);const r=Object.isPlainObject(n)?n.data:n;if(!Array.isArray(r))throw new ReferenceError("Missing data to perform render");e.componentInternalState.updateData(r,t),e.componentInternalState.incrementLoadPage();const o=e.shouldStopRequestingDataWrapper();e.componentEmitter.emit(W.dataLoadSuccess,r,t),e.slotsStateController.loadingSuccessState(),t&&o&&0===Object.size(r)?(e.onDataEmpty(),e.onLifecycleDone()):e.loadDataOrPerformRender()}static onDataLoadError(e,t){e.componentInternalState.setIsLoadingInProgress(!1),e.componentInternalState.setIsLastErrored(!0),e.slotsStateController.loadingFailedState(),e.componentEmitter.emit(W.dataLoadError,t)}static onDataEmpty(e){e.slotsStateController.emptyState(),e.componentEmitter.emit(W.dataLoadEmpty)}static onElementEnters(e,t){e.componentInternalState.setMaxViewedIndex(t),e.loadDataOrPerformRender(),e.componentEmitter.emit(W.elementEnter,t)}static onTombstonesEnter(e){e.componentInternalState.setIsTombstonesInView(!0),e.loadDataOrPerformRender()}static onTombstonesLeave(e){e.componentInternalState.setIsTombstonesInView(!1)}static onItemsInit(e,t){e.onDataLoadSuccess(!0,t)}onReset(){return Object.throw()}onRenderStart(){return Object.throw()}onRenderEngineStart(){return Object.throw()}onRenderEngineDone(){return Object.throw()}onDomInsertStart(e){return Object.throw()}onDomInsertDone(){return Object.throw()}onRenderDone(){return Object.throw()}onLifecycleDone(){return Object.throw()}onConvertDataToDB(e){return Object.throw()}onDataLoadStart(e){return Object.throw()}onDataLoadSuccess(e,t){return Object.throw()}onDataLoadError(e){return Object.throw()}onDataEmpty(){return Object.throw()}onElementEnters(e){return Object.throw()}onTombstonesEnter(){return Object.throw()}onTombstonesLeave(){return Object.throw()}onItemsInit(e){return Object.throw()}})],ie);const le=ie,ce=(e,t)=>{const n=t.getVirtualScrollState(),r=e.some((e=>null!=Object.get(e,"meta.data.chunkDebug")));if(t.r.webappRuntimeConfig.isDebug&&r){const r=t.unsafe.tmp;t.once("resetState",(()=>{r.lastRequestId=""}),{label:`${t.componentId}-searchDebugChunkProcessors`}),r.lastRequestId??(r.lastRequestId="");return e.flatMap((e=>{const t=[];if(e.item.includes("b-srch-card")){const o=Object.get(e,"meta.data.chunkDebug.request_id");Object.isString(o)&&o!==r.lastRequestId&&t.push({item:"b-chunk-info",props:{data:Object.get(e,"meta.data.chunkDebug")},type:"separator",key:`chunk-info-${n.loadPage}`}),r.lastRequestId=o}return t.push(e),t}))}return e};function de(e,t,n){const r={startOffset:0,provideOffset:!0,slotAfterAll:!1,slotBeforeAll:!1,advComponentAttrs:{},componentItemAttrs:{},...n};let o=r.startOffset;const s=()=>{if(!1!==r.provideOffset)return o};return(n,a)=>{if(null==(e=Object.isString(e)?a.field.get(e):Object.isFunction(e)?e(a):e))return n;a.getVirtualScrollState().isInitialRender&&(o=r.startOffset);const i=[],l=a.getCardCount(a.db),c=()=>({items:n,ctx:a,offset:o}),d=m(r.slotBeforeAll,c());d>0&&h("push",i,d),n.forEach(((e,t)=>{const n=[e],o=()=>({...c(),item:e,itemIndex:t}),s=m(r.slotBefore,o());s>0&&h("unshift",n,s);const a=m(r.slotAfter,o());a>0&&h("push",n,a),i.push(...n)}));const u=m(r.slotAfterAll,c());function m(e,t){const n=Object.isFunction(e)?e(t):e;return!1===n?0:!0===n?1:n}function p(){if(null==e)throw new Error("Missing banners to perform filtration");if(Object.isFunction(e)||Object.isString(e))throw new TypeError("The banners should be of type Array<Banner>, received "+typeof e);return a.filterBanners(e,{offset:s(),conditions:{cardCount:l},...t})}function h(e,t,n){let r=0;for(;r<n;){const n=p();(Object.size(n)>0||a.isAdsDebug())&&t[e](g(n)),o++,r++}}function g(e){return Object.mixin({deep:!0,concatArrays:!1},{item:"b-adv-functional",props:{banners:e,...r.advComponentAttrs},key:`${e.map((e=>e.uuid)).join(" ")}-${o}`,type:"item"},r.componentItemAttrs)}return u>0&&h("push",i,u),i}}function ue(e,t){return{slotBefore:!1,slotAfter:!1,slotAfterAll:({items:n,ctx:r})=>{const{isLastRender:o,items:s}=r.getVirtualScrollState();if(!o)return!1;const a=(n.filter((({type:e})=>"item"===e)).length+s.length)%e;return 0!==a&&(null==t||!1===t||e-a)},provideOffset:"with-offset"===t,advComponentAttrs:{class:[this.provide.fullElementName("filler-adv"),"g-filler-adv"]}}}function me(){return{slotAfter:!1,slotBefore:!1,provideOffset:!1,slotAfterAll:({ctx:e})=>{const{isLastRender:t}=e.getVirtualScrollState();return t},advComponentAttrs:{class:[this.provide.fullElementName("last-slot-adv"),"g-last-slot-adv"]}}}function pe(e){return{slotAfter:({itemIndex:t,ctx:n})=>{var r;const o=n.getVirtualScrollState().items,s=o.length,a=o[o.length-1];if(s+t+1>=e&&!0!==(null==a||null===(r=a.meta)||void 0===r?void 0:r.isAdsBetweenRow)){const n=s+t+1;return n>=e&&n%e==0}return!1},slotBefore:({itemIndex:e,ctx:t})=>{const{isInitialRender:n}=t.getVirtualScrollState();return n&&0===e},componentItemAttrs:{meta:{adsBetweenRow:!0},type:"separator"},advComponentAttrs:{class:[this.provide.fullElementName("fullwidth-adv"),"g-fullwidth-adv"]}}}const he=(0,a.A)(["analyticsWaitForReady"]);let ge=class bVirtualScrollNew extends le{constructor(){super(...arguments),this.analyticsEvents=["appear"],this.analyticsOptions={inViewOptions:{threshold:1e-5},delegate:(e,t)=>t.$refs.container},this.analyticsInitOptions={canInit:({ctx:e})=>Boolean(null==e?void 0:e.isReady),watch:[{path:":componentStatus:ready",opts:{label:he.analyticsWaitForReady}}]}}getItemsProcessors(){return Object.isArray(this.itemsProcessors)?[...this.itemsProcessors,ce]:{...this.itemsProcessors,searchDebugChunkProcessors:ce}}};(0,o.Cg)([(0,m.prop)({type:Number,required:!1})],ge.prototype,"loadersShowDebounce",void 0),(0,o.Cg)([(0,m.prop)({type:Function,required:!1,default:e=>{if(Object.isPlainObject(e))return e.total??Object.get("data.length",e)}})],ge.prototype,"getCardCount",void 0),ge=(0,o.Cg)([(0,i.C)(u.A),(0,m.component)({layer:"@edadeal/core"})],ge);function fe(e){if(null==Object.get(e.sourceBox,"params.ads"))return;const t=[];if(null!=Object.get(e.sourceBox,"params.ads.content")){const{itemsProcessors:n}=be.call(this,e);t.push(...n)}if(null!=Object.get(e.sourceBox,"params.ads.filler")){const{itemsProcessors:n}=ye.call(this,e);t.push(...n)}if(null!=Object.get(e.sourceBox,"params.ads.betweenRows")){const{itemsProcessors:n}=ve.call(this,e);t.push(...n)}if(null!=Object.get(e.sourceBox,"params.ads.lastSlot")){const{itemsProcessors:n}=Se.call(this,e);t.push(...n)}return{itemsProcessors:t}}function be(e){if(null==Object.get(e.sourceBox,"params.ads"))return;const{options:t,banners:n,filters:r}=Ce.call(this,e,"content");return{itemsProcessors:[de(n,r??{},{slotAfter:!0,slotBefore:({itemIndex:e,ctx:t})=>t.getVirtualScrollState().isInitialRender&&0===e,...t})]}}function ve(e){if(null==Object.get(e.sourceBox,"params.ads"))return;const{options:t,banners:n,filters:r}=Ce.call(this,e,"betweenRows"),o=Object.get(e.sourceBox,"params.ads.betweenRows.elementsInRow");if(void 0===o)throw new ReferenceError('"elementsInRow" was not provided in params.ads.betweenRows options');return{itemsProcessors:[de(n,r??{},Object.mixin({deep:!0,concatArrays:!0},pe.call(this,o),t))]}}function ye(e){if(null==Object.get(e.sourceBox,"params.ads"))return;const{options:t,banners:n,filters:r}=Ce.call(this,e,"filler"),o=Object.get(e.sourceBox,"params.ads.filler.elementsInRow"),s=Object.get(e.sourceBox,"params.ads.filler.fulfillRow");if(void 0===o)throw new ReferenceError('"elementsInRow" was not provided in params.ads.filler options');return{itemsProcessors:[de(n,r??{},Object.mixin({deep:!0,concatArrays:!0},ue.call(this,o,s),t))]}}function Se(e){if(null==Object.get(e.sourceBox,"params.ads"))return;const{options:t,banners:n,filters:r}=Ce.call(this,e,"lastSlot");return{itemsProcessors:[de(n,r??{},Object.mixin({deep:!0,concatArrays:!0},me.call(this),t))]}}function Ce({sourceBox:e},t){var n;const r=Object.get(e,`params.ads.${t}.banners`)??Object.get(e,"params.ads.banners")??this.rootRenderer.banners,o=Object.get(e,`params.ads.${t}.filters`)??Object.get(e,"params.ads.filters"),s=Object.get(e,`params.ads.${t}.options`)??Object.get(e,"params.ads.options")??{},a=e.component.split("-").slice(1).join("-"),i=[`g-${a}-${t}-adv`,`g-${a}-adv`],l=null!=this.r.activePage?[this.provide.fullElementName(this.r.activePage,`${a}-${t}-adv`),...i]:[...i];return{banners:r,filters:o,options:{...s,advComponentAttrs:{...s.advComponentAttrs,class:[l].concat((null===(n=s.advComponentAttrs)||void 0===n?void 0:n.class)??[])}}}}var Pe=n(73573);const Ie="ads_element",xe={lompakko_card:"lmp",coupon_campaign:"cps",partial_coupon_campaign:"cps",btl_campaign:"btl",promotion_campaign:"promo"},Re=g.default.namespace("b-page-renderer:presets"),Oe={element:e=>Ae(e.type??e.itemType),elementKey:"uuid",elementData:e=>e.data??e,elementStage:({type:e})=>xe[e],elementRenderKey:"uuid",elementAttrs:{dontWaitRemoteProviders:!0,size:"m"}},Ee={...Oe,element:e=>"b-page-renderer"===e.option?"b-page-renderer":Ae(e.type??e.itemType)};function Ae(e){return"coupon_campaign"===e||"partial_coupon_campaign"===e?"b-card":"offer"===e||"meta_offer"===e||"sku"===e||"basic_offer"===e?"b-srch-card":"b-card-functional"}const De={...Oe,element:e=>e.type===Ie?"b-ads-slot":"b-cb-card-light-functional",getPlaceholderTextTpl(e){const t=this.fillObject(e.request);if((null==t?void 0:t.tagUuid)===Pe.g)return{tpl:"raw",params:{value:`Отмечайте ${Boolean(!0)?"сердечком":"звездочкой"} акции,<br>которые вам понравились`,style:"font-size: 16px; line-height: 20px; font-weight: normal"}}},getPlaceholderImgClass(e,t,n){const r=this.fillObject(n.request);if((null==r?void 0:r.tagUuid)===Pe.g)return this.provide.fullElementName(e,t,"cb-favs-empty"+(Boolean(!0)?"-scb":""),!0)}},je={},we={...Oe,elementView:"preview",elementRenderKey:"uuid",elementAttrs:{retailerIcon:!1},skeletonShape:"card-square"},Le={...Oe,element:e=>e.type===Ie?"b-ads-slot":Object.get(e,"data.features.cumulative")?"b-card":"b-card-functional"},ke={element:e=>e.isVertical?"b-cps-card-flat":"b-card",elementRequest:e=>({get:{uuid:e.uuid}}),elementData:null,elementStage:()=>"cps",dataProvider:"cps.Compilation",elementDataProvider:e=>"coupon_campaign"===e.type?"cps.Campaign":"cps.PartialCampaign",elementSkeletonShape:"card-preview",elementAction:{action:{args:[{query:{compilationSlug:{get:"parent.slug",target:"$boxParams"},compilationUuid:{get:"request.uuid",target:"$boxParams"},listPosition:{get:"index",target:"$boxParams"}}}],defArgs:!0,method:"r.openCpsCard"}},elementAttrs:{size:"s"}},$e={...ke,elementData:Oe.elementData,elementDataProvider:null,elementRequest:null,element:e=>e.isVertical?"b-cps-card-flat":"b-card-functional"},qe={...Oe,element:"b-card",elementAttrs:{...Oe.elementAttrs,shadow:!0},getPlaceholderImgClass(e,t){return this.provide.fullElementName(e,t,"promo-list-empty",!0)}};function Be({normalizedBox:e}){return{element:"b-shop",elementData:{$el:!0},elementAttrs:{externalAnalyticsParams:()=>({GroupName:Object.get(e,"params.parent.title.main")})}}}const Me={...Oe,elementView:"preview",elementAttrs:{...Oe.elementAttrs,size:"l"}},Fe={...Me,elementAttrs:{...Me.elementAttrs,size:"m",style:{whiteSpace:"normal"}}},Te={...Me,skeletonShape:"card",skeletonSizeMod:"m",elementView:"default",elementAttrs:{...Me.elementAttrs,withTitle:!0}},Ve={elementAttrs:{withToggle:!0}};function ze({sourceBox:e},t){var n,r;return{control:{action:{args:[{query:{uuid:null===(n=e.params)||void 0===n?void 0:n.uuid}}],defArgs:!0,handler:"cps"===t?"r.openCpsCard":"r.openCbCard"}},attrs:{dataProvider:`${t}.Campaign`,request:{get:{uuid:null===(r=e.params)||void 0===r?void 0:r.uuid}},skeletonShape:"card",stage:t,view:"default"},is:"b-card"}}function Ne({sourceBox:e}){return ze.call(this,{sourceBox:e},"cps")}function _e({sourceBox:e}){return ze.call(this,{sourceBox:e},"cb")}function Ue(){return{elementAttrs:{size:"exp1"}}}function We(){return{elementAttrs:{size:"exp2"}}}function Ke(){return{elementAttrs:{size:"s"}}}function He(){return{elementAttrs:{size:"m"}}}function Qe(){return{elementAttrs:{size:"l"}}}function Ge(){return{elementAttrs:{size:"xl"}}}const Ye={element:e=>{switch(e.type){case"ads_element":return"b-ads-slot";case"coupons_collection":case"coupons_partner":return"b-cps-collection-card";default:return null==e.data?"b-cps-card-default":"b-cps-card-default-functional"}},skeletonShape:"card-square",elementData:(e,t)=>{switch(e.type){case"ads_element":return{p:{adsSlots:{slotsValue:!0}}};case"coupons_collection":return function(e,t){var n,r;const{data:o}=e;return{collectionUuid:o.collection.uuid,total:o.totalCampaigns,description:o.preview.description,collectionName:o.collection.name,imageUrl:null===(n=o.imageUrl)||void 0===n?void 0:n.preview,href:null===(r=t.router)||void 0===r?void 0:r.getRoutePath("cps-collection",{params:{collectionId:o.collection.slug}})}}(e,t);case"coupons_partner":return function(e,t){var n,r,o;const{data:s}=e;return{collectionUuid:s.partner.uuid,total:s.totalCampaigns,description:s.preview.description,collectionName:s.partner.name,imageUrl:null===(n=s.imageUrl)||void 0===n?void 0:n.preview,cardColor:null===(r=s.styles)||void 0===r?void 0:r.primary,href:null===(o=t.router)||void 0===o?void 0:o.getRoutePath("cps-partner",{params:{partnerSlug:e.slug}})}}(e,t);default:return function(e){const t={},{data:n}=e;if(null!=n){var r,o,s;t.uuid=e.uuid,t.slug=e.slug,t.shortValue=n.shortValue,t.partnerName=n.partner.name,t.partnerUuid=n.partner.uuid,t.imageUrl=(null===(r=n.imageUrl)||void 0===r?void 0:r.preview)??(null===(o=n.partner.imageUrl)||void 0===o?void 0:o.default),t.description=n.preview.description,t.bgColor=null===(s=n.styles)||void 0===s?void 0:s.primary}else Re.error("Coupon card params empty data attribute");return t}(e)}},elementExternalAnalyticsParams:e=>"coupons_partner"===e.type?{PartnerUuid:e.data.partner.uuid,PartnerName:e.data.partner.name}:{}};const Xe={element:"b-cat",elementKey:"uuid",elementData:{$el:!0}};var Je=n(18793);const Ze={defaultSource:{$source:"route.query",$from:"segment"},defaultSetter(e,t,n){if(0===n.length)return;if(e in this.$store)return;const r=this.fillObject(t),o=n.filter((e=>e.name===r))[0];null!=o&&this.rootRenderer.saveToStore(e,o.uuid)}},et={data:[{label:"Все акции",active:!0,value:Je.DEFAULT_LIST_VALUE,href:"/cashbacks"},{label:"За чеки",value:"check",href:"/cashbacks/za-tovary-v-cheke"},{label:"Онлайн покупки",value:"online",href:"/cashbacks/za-online-pokupki"}]};function tt(){var e,t,n;return{data:[{label:this.t`Все`,value:Je.DEFAULT_LIST_VALUE,href:null===(e=this.router)||void 0===e?void 0:e.getRoutePath("cps-index")},{label:this.t`Программы лояльности`,value:"loyalty_program",href:null===(t=this.router)||void 0===t?void 0:t.getRoutePath("cps-index",{query:{type:"loyalty_program"}})},{label:this.t`Промокоды`,value:"coupon",href:null===(n=this.router)||void 0===n?void 0:n.getRoutePath("cps-index",{query:{type:"coupon"}})}]}}const nt={element:"b-cat",elementKey:"uuid",elementData:{$el:!0},dbConverter:e=>({data:(null==e?void 0:e.collections.map((e=>{var t;return{uuid:e.uuid,name:e.name,slug:e.slug,isSkeleton:!1,iconUrl:null===(t=e.imageUrl)||void 0===t?void 0:t.icon}})))??[]}),elementAnalyticsClick:(e,t,n)=>{t.analytics.sendEvent("click",{Position:e+1,Name:n.name,TagUUID:n.uuid,FromScreen:t.field.get("route.query.fromScreen")},"TagItem")}};n(48752);Object.createDict({coupon_campaign:e=>Promise.resolve().then(n.bind(n,5184)).then((({default:t})=>new t(e)))});const rt="__prefetch-pagination-limit__",ot="__prefetch-pagination-page__";const st=()=>{const e={elementsPerChunk:6,elementsPerRequest:12,skeletonShape:"card",skeletonSize:6};return{...{dbConverter:e=>Object.isArray(e)?{data:e}:e,requestQuery:t=>({get:{[ot]:t.loadPage,[rt]:e.elementsPerRequest}}),preloadAmount:t=>t.loadPage<3?e.elementsPerRequest:2*e.elementsPerRequest,shouldPerformDataRender:t=>(t.remainingItems??0)<=e.elementsPerChunk,shouldStopRequestingData:t=>!Object.isTruly(t.lastLoadedData.length)||e.elementsPerRequest>t.lastLoadedData.length,onLifecycleDone(){this.rootRenderer.emit("renderComplete")}},...e}},at=()=>({...st(),requestTillBottom:5,skeletonShape:"card-preview"}),it=()=>({...st(),elementsPerChunk:1e4,shouldStopRequestingData:()=>!0,requestEngine:void 0,requestQuery:void 0,skeletonShape:"card-collection"}),lt=()=>({...it(),skeletonShape:"card-goods-segment"}),ct={...it(),skeletonShape:"card-shop",elementKey:"uuid"},dt=()=>({...it(),reloadOnActivation:!0,skeletonShape:"card-cucumber-collection",attrs:{exterior:"cucumber"},elementAttrs:{exterior:"cucumber"}}),ut={...it(),skeletonShape:"card-offer",dbConverter:e=>({data:(0,Je.ofrCampaignsToOffersList)(e),total:e.total})},mt={...ut},pt={elementsPerChunk:11,shouldStopRequestingData:()=>!0,dbConverter:e=>({data:e,total:e.length})},ht=()=>({...it(),skeletonShape:"card-prize-collection",attrs:{exterior:"prize"},elementAttrs:{exterior:"prize"}}),gt=()=>{const e=st();return{...e,elementsPerChunk:16,dbConverter:t=>{if(Object.isArray(t.data)){const{data:n}=e.dbConverter(t),r=[];return n.forEach((e=>{r.push(e),r.push({type:Ie,uuid:`ads_${e.uuid}`,data:{}})})),{data:r}}return t}}},ft={...it(),skeletonShape:"card-offer",elementsPerChunk:5,requestQuery:e=>({get:{[ot]:e.loadPage,[rt]:5}}),shouldStopRequestingData:e=>e.lastLoadedData.length<5},bt={elementsPerChunk:6,dbConverter:e=>({data:e.items}),requestQuery:e=>({get:{offset:10*e.loadPage,limit:10}}),preloadAmount:10,shouldPerformDataRender:e=>(e.remainingItems??0)<=3,shouldStopRequestingData:e=>e.lastLoadedData.length<20},vt={...ut,preloadAmount:0,elementsPerChunk:10,shouldPerformDataRender:e=>(e.remainingItems??0)<=3,requestQuery:e=>({get:{offset:10*e.loadPage,limit:10}}),shouldStopRequestingData(e){var t;return e.loadPage>=3||(null===(t=e.lastLoadedRawData)||void 0===t?void 0:t.total)===e.data.length}},yt={dataProvider:"ofr.LocationInfo",request:{favouriteFirst:!0,addOnlineCollection:!0}};function St({normalizedBox:e}){const t=(e,n)=>{null==e||null!=this.$store[e]?n():this.rootEmitter.once("catsChange",(()=>{t(e,n)}))};return{onEnter:(n,r)=>{var o,s;const a=null===(o=e.params)||void 0===o?void 0:o.parent,i=null==a?void 0:a.content.find((e=>"b-cats-box"===e.component)),l=null==i||null===(s=i.params)||void 0===s?void 0:s.globalName;t(l,r)}}}const Ct={...Oe,elementData:e=>e};class Normalizer{constructor(e){this.component=e.unsafe}get rootRenderer(){return this.component.rootRenderer.unsafe}normalizeContent(e){const t=Object.fastClone(e);return this.component===this.rootRenderer&&(this.markPosition(t,1),this.markAds(t)),t.map(((t,n)=>this.attachElementAnalytics(this.normalizeSchemaElement(t),n,e))).filter((e=>this.isAllowedForExperiment(e)))}isAllowedForExperiment(e){var t,n;let r=null===(n=e.params)||void 0===n||null===(t=n.experimentId)||void 0===t?void 0:t.toString();if(null!=r&&""!==r){const e=r.startsWith("!");e&&(r=r.substr(1));const{experiments:t}=this.component.remoteState;if(!t||0===t.length)return e;const n=Boolean(t.find((e=>e.id.toString()===r)));return!e&&n||e&&!n}return!0}expandPreset(e,t,n){if(!e)return{};if(Array.isArray(e)){const r=(e,r)=>this.deepExtend(e,this.expandPreset(r.trim(),t,n));return e.reduce(r,{})}if(r[e]){const o=r[e];return Object.isFunction(o)?o.call(this.component,{sourceBox:t,normalizedBox:n}):o}return{}}markAds(e){const t=e=>{var n,r,o,s,a;if("b-vertical-box"===e.component&&(null===(r=e.params)||void 0===r||null===(n=r.elementAttrs)||void 0===n?void 0:n.hasAds))return e;if("b-vertical-box"===e.component&&(null===(s=e.params)||void 0===s||null===(o=s.adsSlots)||void 0===o?void 0:o.slotsValue))return e;if(null===(a=e.params)||void 0===a?void 0:a.content)for(let i=0;i<e.params.content.length;i++){const n=t(e.params.content[i]);if(n)return n}};for(let r=0;r<e.length;r++){var n;const o=e[r],{component:s}=o;if("b-def-box"===s||"b-compilation-box"===s||"b-component-box"===s){if(t(o))continue}o.params={...o.params,adsPosition:{afterAll:!0,...null===(n=o.params)||void 0===n?void 0:n.adsPosition}}}}markPosition(e,t,n=!0){return e.reduce(((r,o,s)=>{const a=o.params??{};return a.index=t+r,a.isLast=n&&s===e.length-1,a.content&&a.content.length>0&&(r+=this.markPosition(a.content,t+r,a.isLast)-1),r+=1,o.params=a,r}),0)}normalizeSchemaControls(e,t){switch(t){case"b-def-box":return{...e,attrs:{width:"full",exterior:"outline",...e.attrs}};case"b-def-box:title":return{...e,attrs:{size:"s",rounding:"big",exterior:"outline",...e.attrs}};default:return e}}normalizeSchemaElement(e){const t={};switch(e.component){case"b-def-box":{var n,r;const o=e.params??{};return Object.assign(t,{component:e.component,params:this.deepExtend({},this.expandPreset(o.preset,e,t),o,{title:o.title&&{...o.title,controls:null===(n=o.title.controls)||void 0===n?void 0:n.map((t=>this.normalizeSchemaControls(t,`${e.component}:title`)))},controls:null===(r=o.controls)||void 0===r?void 0:r.map((t=>this.normalizeSchemaControls(t,e.component)))})}),t}case"b-slider-box":{const n=e.params??{},r=this.expandPreset(n.preset,e,t),o=n.elementsPerChunk??r.elementsPerChunk;return Object.assign(t,{component:e.component,params:this.deepExtend({onEnter:n.onEnter??((e,t)=>t())},r,n,{elementsPerChunk:Object.isTruly(o)?o:5,skeleton:this.deepExtend({},r,n,n.skeleton,{isSkeleton:!0,dataProvider:void 0})})}),t}case"b-cats-box":case"b-component-box":case"b-swipe-box":case"b-content-box":{const n=e.params??{};return Object.assign(t,{component:e.component,params:this.deepExtend({},this.expandPreset(n.preset,e,t),n)}),t}case"b-compilation-box":case"b-vertical-box":{const n=e.params??{},r=this.expandPreset(n.preset,e,t),o=n.elementsPerChunk??r.elementsPerChunk;return Object.assign(t,{component:e.component,params:this.deepExtend({onEnter:n.onEnter??((e,t)=>t())},r,n,{elementsPerChunk:Object.isTruly(o)?o:5,skeleton:this.deepExtend({},r,n,n.skeleton,{isSkeleton:!0,dataProvider:void 0})})}),t}default:return e}}attachElementAnalytics(e,t,n){const r=e.params??{};return void 0===r.parent&&Object.defineProperty(r,"parent",{get:()=>this.component.p??null,enumerable:!1}),["controls","elementAction"].forEach((t=>{const n=r[t];this.attachBoxToControl(n,e)})),e.params=r,function(e){const{params:t}=e;if(t)t.analytics&&new Analytics(e)}(e),e}attachBoxToControl(e,t){const n=e=>{e&&Object.isPlainObject(e.action)&&!Object.get(e,"action.$self")&&Object.defineProperty(e.action,"$self",{value:t,enumerable:!1,configurable:!0})};return e&&(Array.isArray(e)?e.forEach(n):n(e)),e}deepExtend(e,...t){return Object.mixin({deep:!0,concatArray:!1},e,...t)}}var Pt;n(54081),(async()=>{if(!__webpack_component_styles_are_loaded__("b-skeleton"))try{await Promise.all([n.e(84121),n.e(19196)]).then(n.bind(n,19196))}catch(e){stderr(e)}})();try{TPLS["b-skeleton"]=n(58515)["b-skeleton"]}catch(Ot){stderr(Ot)}const It=(0,a.A)(["remarkVirtualScroll","canRender","attachLazyRenderListener"]);d.default.addToPrototype(d);let xt=Pt=class bPageRenderer extends m.default{constructor(){super(...arguments),this.lazyRender=!1,this.contentProp=[]}get unsafe(){return Object.cast(this)}get funcResolver(){return new FuncResolver(this)}get normalizer(){return new Normalizer(this)}get contentIterator(){const{content:e}=this;return this.lazyRender?this.asyncRender.iterate(e,1,{filter:this.asyncRenderFilter.bind(this)}):e}get $store(){return this.rootRenderer.reactiveTmp}get isRootRenderer(){return this===this.rootRenderer}get rootTopOffset(){var e;return(null===(e=this.rootRenderer.$el)||void 0===e?void 0:e.offsetTop)??0}get rootRenderer(){let e=this,t=this.vdom.closest(Pt);for(;t;)e=t,t=t.vdom.closest(Pt);return e}callControlAction(e,...t){return Object.cast(h.A.callControlAction(this,e,...t))}fillObject(e,t){if(Object.isArray(e))return e.map((e=>this.fillObject(e,t)));const n=e=>{let n=t;if(e.$source){switch(e.$source){case"$store":n=this.rootRenderer.reactiveTmp;break;case"$nonWatchStore":n=this.rootRenderer.tmp;break;case"$route":n=this.route;break;case"$root":n=this.r;break;default:n=this.field.get(String(e.$source))}n instanceof s.Ay&&(n=n.unwrap())}return n};if(Object.isPlainObject(e)){const r=n(e);if(e.$el)return r;if(e.$from)return Object.get(r,String(e.$from));const o={};for(let n=Object.keys(e),s=0;s<n.length;s++){const r=n[s],a=e[r];o[r]=this.fillObject(a,t)}return o}return e}resolveCondition(e){const t=this.field.get("params.if",e),n=this.field.get("params.unless",e);return t?Boolean(this.fillObject(t)):!n||!this.fillObject(n)}getControlEvent(e){switch(e.component){case"b-file-button":return"change";case"b-button":return"click:component";default:return"click"}}getParentBox(e=this.$el){var t,n;const r=null==e||null===(t=e.parentElement)||void 0===t?void 0:t.closest("[data-box]");if(!r)return;const o=Number(r.getAttribute("data-box-index"))||0;let s;s=r.getAttribute("component-id")===this.componentId?this:this.$normalParent;const a=this.isComponent(s,Pt)?s:void 0,i=(null==a?void 0:a.content)??[];return{name:r.getAttribute("data-box")??"",index:o,isSingle:i.length<=1,isFirst:0===o,isLast:o===i.length-1,element:r,params:(null===(n=i[o])||void 0===n?void 0:n.params)??void 0,component:a,content:i}}markRecursive(e,t,n=!0){e===this.$el&&this.setMod(t,n);let r=this.getParentBox(e);for(;r;){var o;const e=null===(o=r.component)||void 0===o?void 0:o.unsafe;var s;if(e)null===(s=e.block)||void 0===s||s.setElementMod(r.element,"box",t,n);r=this.getParentBox(r.element)}}emitReenderChunkEvent(){this.emit("renderChunkComplete")}resolveClasses(...e){const t={},n=(e,n)=>{const r=Object.get(t,n);e!==r&&(null!=r?Array.isArray(r)?r.push(e):Object.set(t,n,[r,e]):Object.set(t,n,e))},r=(e,t,n=[])=>{const o=n.join("."),s=n.length>0?Object.get(e,o):e;if("object"==typeof s&&null!=s)for(const a of Object.keys(s))r(e,t,[...n,a]);else t(s,o)};for(const o of e)r(o,n);return t}remarkVirtualScroll(e){const t=()=>{e.$el&&this.markRecursive(e.$el,"hidden",!this.field.get("db.data.length",e)&&!this.field.get("items.length",e))};e.watch("db",t,{label:It.remarkVirtualScroll}),t()}applyFilter(e,t){if(!e||!t)return e;const n=[],r=this.fillObject(t);return Object.forEach(e,(e=>{const o=Object.isPlainObject(e)?this.fillObject(t,e):r;if(Object.isPlainObject(o)){let t=!0;for(let n=Object.keys(o),r=0;r<n.length;r++){const s=n[r],a=o[s];if(void 0!==a&&!Object.fastCompare(Object.isPlainObject(e)?e[s]:e,a)){t=!1;break}}t&&n.push(e)}})),n}getWatchersFromObjects(...e){if(!e.length)return;const t={};for(let n=0;n<e.length;n++){const r=e[n];if(Object.isPlainObject(r))for(let e=Object.keys(r),n=0;n<e.length;n++){const o=r[e[n]];if(Object.isPlainObject(o)&&o.$from){let e="";if(o.$source)switch(o.$source){case"$store":case"$nonWatchStore":e="rootRenderer:store-change-";break;default:e=String(o.$source)}const n=o.$action||"reload",r=t[n]||[];t[n]=r,r.push({field:e+o.$from,provideArgs:!1})}}}return Object.freeze(t)}saveToStore(e,t,n="reactiveTmp"){if(!e||null===t)return;const r=`${n}.${e}`,o=this.field.get(r);null==o&&t===c.p||Object.fastCompare(t,o)||(this.field.set(r,t),this.r.emit(`storeChange-${e}`,t))}func(e){return this.funcResolver.for(e)}resolveKey(e,...t){if(!e)return;const n=this.field.get(e);return Object.isFunction(n)?n.call(this,...t):Object.isPlainObject(t[0])?this.field.get(e,t[0]):e}callIfFunction(e,...t){return Object.isFunction(e)?e.call(this,...t):e}callOrFill(e,t,...n){return Object.isFunction(e)?e.call(this,t,...n):this.fillObject(e,t)}getIfString(e){return Object.isString(e)?this.field.get(e):e}getValueFromStore(e){return this.field.get(e,this.$store)}asyncRenderFilter(){if(!this.isRootRenderer)return!0;return(this.tmp.chunkCursor??0)<3||document.documentElement.scrollHeight===innerHeight?Promise.resolve(!0):this.promisifyOnce("canRender").then((()=>(this.tmp.chunkCursor=0,!0)))}attachLazyRenderListener(){if(!this.isRootRenderer)return;const{async:e}=this,t=()=>{const{scrollHeight:t}=document.documentElement,n=innerHeight/2;t-n<innerHeight/3+pageYOffset+n+2*this.rootTopOffset&&e.setImmediate((()=>this.emit("canRender")),{label:It.canRender,join:!0})};e.on(document,"scroll",t,{label:It.attachLazyRenderListener}),this.async.requestAnimationFrame(t)}initModEvents(){super.initModEvents(),this.sync.mod("root","rootRenderer",(e=>e===this))}normalizePresetMods(e){var t;return(null===(t=this.field.get("params.preset",e))||void 0===t?void 0:t.reduce(((e,t)=>(e[`preset-${t}`]=!0,e)),{}))??{}}normalizeAttrs(e,t){if(null==t)return t;const n=(0,l.registerComponent)(e);return null!=n&&Object.keys(t).forEach((e=>{var r;if(!1===(null===(r=n.props[e])||void 0===r?void 0:r.forceUpdate)){const n=t[e];t[`@:${e}`]=this.createPropAccessors((()=>n)),delete t[e]}})),t}generateActionHandlers(e){if(null!=e)return Object.keys(e).reduce(((t,n)=>(t[`@${n}`]=(...t)=>this.callControlAction(e[n],...t),t)),{})}renderChunk(e){return t=>{const n=e.call(this,t);return Object.isNumber(this.tmp.chunkCursor)&&this.tmp.chunkCursor++,n}}onElementEnter(e,t){const n=e.component;if(!n)return;n.isActivated||n.activate();let r=e.nextElementSibling;for(let o=0;o<t;o++){if(!r)return;const e=r.component;if(!e)return;e.isActivated||e.activate(),r=r.nextElementSibling}}onComponentRequestError(e,t){const n=this.r.namespace;try{if(n===p.Uo.cb)return}catch(r){stderr(r)}this.r.onComponentRequestError(e,t)}onCatsDbChange(e,t,n){this.r.emit("catsDbReady",t,n)}onCatsListEnterPlace(e){var t,n;(null===(t=e.sticky)||void 0===t?void 0:t.showLinkBorder)&&(null===(n=this.$refs.catsList)||void 0===n||n[0].setMod("linkBorder",!1))}onCatsListLeavePlace(e){var t,n;(null===(t=e.sticky)||void 0===t?void 0:t.showLinkBorder)&&(null===(n=this.$refs.catsList)||void 0===n||n[0].setMod("linkBorder",!0))}saveSliderScroll({saveScroll:e}){var t;const{sliderBox:n}=this.$refs;if(null==n)return;const r=null===(t=n.unsafe.block)||void 0===t?void 0:t.element("wrapper");null!=r&&e(r)}};xt.mods={context:["wall"],root:["true","false"]},(0,o.Cg)([(0,m.prop)(Boolean)],xt.prototype,"lazyRender",void 0),(0,o.Cg)([(0,m.prop)(Array)],xt.prototype,"contentProp",void 0),(0,o.Cg)([(0,m.prop)({required:!1})],xt.prototype,"banners",void 0),(0,o.Cg)([(0,m.field)((e=>e.sync.link((t=>e.normalizer.normalizeContent(t)))))],xt.prototype,"content",void 0),(0,o.Cg)([(0,m.computed)({cache:"forever"})],xt.prototype,"funcResolver",null),(0,o.Cg)([(0,m.computed)({cache:"forever"})],xt.prototype,"normalizer",null),(0,o.Cg)([(0,m.computed)({cache:!0,dependencies:["content"]})],xt.prototype,"contentIterator",null),(0,o.Cg)([(0,m.wait)("ready")],xt.prototype,"markRecursive",null),(0,o.Cg)([(0,m.watch)("localEmitter:asyncRenderChunkComplete")],xt.prototype,"emitReenderChunkEvent",null),(0,o.Cg)([(0,m.hook)("mounted")],xt.prototype,"attachLazyRenderListener",null),(0,o.Cg)([(0,m.watch)("rootEmitter:onBeforeSwitchPage")],xt.prototype,"saveSliderScroll",null),xt=Pt=(0,o.Cg)([(0,i.C)(u.A),(0,m.component)({layer:"@edadeal/core"})],xt);const Rt=xt}}]);