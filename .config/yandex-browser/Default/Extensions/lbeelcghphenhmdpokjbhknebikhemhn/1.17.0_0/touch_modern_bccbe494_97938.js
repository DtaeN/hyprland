(self.webpackChunkv4fire_1=self.webpackChunkv4fire_1||[]).push([[97938],{24058:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$:()=>S.$$,ASYNC_RENDER_ID:()=>S.ASYNC_RENDER_ID,ComponentEvent:()=>S.ComponentEvent,ComponentInterface:()=>S.ComponentInterface,ComponentResetType:()=>S.ComponentResetType,ElementModEvent:()=>S.ElementModEvent,ExtraProvider:()=>S.ExtraProvider,ExtraProviders:()=>S.ExtraProviders,FeatureManager:()=>S.FeatureManager,InferComponentEvents:()=>S.InferComponentEvents,InferEvents:()=>S.InferEvents,ModEvent:()=>S.ModEvent,ModEventName:()=>S.ModEventName,ModEventReason:()=>S.ModEventReason,ModEventType:()=>S.ModEventType,ModelMethod:()=>S.ModelMethod,Module:()=>S.Module,PARENT:()=>S.PARENT,ProviderOptions:()=>S.ProviderOptions,RequestBody:()=>S.RequestBody,RequestError:()=>S.RequestError,RequestQuery:()=>S.RequestQuery,RequestResponseObject:()=>S.RequestResponseObject,Response:()=>S.Response,SetElementModEvent:()=>S.SetElementModEvent,SetModEvent:()=>S.SetModEvent,Socket:()=>S.Socket,Theme:()=>S.Theme,V4_COMPONENT:()=>S.V4_COMPONENT,add:()=>S.add,app:()=>S.app,base:()=>S.base,bindRemoteWatchers:()=>S.bindRemoteWatchers,callMethodFromComponent:()=>S.callMethodFromComponent,canSkipWatching:()=>S.canSkipWatching,component:()=>S.component,computed:()=>S.computed,createRequest:()=>S.createRequest,customWatcherRgxp:()=>S.customWatcherRgxp,default:()=>x,deleteData:()=>S.deleteData,destroyApp:()=>S.destroyApp,dsComponentsMods:()=>S.dsComponentsMods,extractWebappShortName:()=>S.extractWebappShortName,field:()=>S.field,gc:()=>S.gc,get:()=>S.get,getComponentMods:()=>S.getComponentMods,getComponentName:()=>S.getComponentName,getDefaultRequestParams:()=>S.getDefaultRequestParams,getFieldsStore:()=>S.getFieldsStore,getInfoFromConstructor:()=>S.getInfoFromConstructor,getPropertyInfo:()=>S.getPropertyInfo,globalEmitter:()=>S.globalEmitter,heightMode:()=>v,hook:()=>S.hook,init:()=>S.init,initEmitter:()=>S.initEmitter,isAbstractComponent:()=>S.isAbstractComponent,isBinding:()=>S.isBinding,isComponent:()=>S.isComponent,isCustomWatcher:()=>S.isCustomWatcher,isPrivateField:()=>S.isPrivateField,isPropGetter:()=>S.isPropGetter,isSmartComponent:()=>S.isSmartComponent,isStore:()=>S.isStore,modsInitializer:()=>S.modsInitializer,normalizeClass:()=>S.normalizeClass,normalizeStyle:()=>S.normalizeStyle,paramsFactory:()=>S.paramsFactory,peek:()=>S.peek,post:()=>S.post,prop:()=>S.prop,resetComponents:()=>S.resetComponents,rootComponents:()=>S.rootComponents,runHook:()=>S.runHook,statuses:()=>S.statuses,system:()=>S.system,update:()=>S.update,url:()=>S.url,wait:()=>S.wait,watch:()=>S.watch});var o=s(31635),i=s(73756),n=s(66454),l=s(59838),r=s(80225),a=s(8499);const c="index",d=(0,i.A)(["addNewPage","pageChange","historyClear","calculateCurrentPage","unwindPage","createTrigger","setObserving","initPage","setTriggerHeight","initTrigger"]);class History extends a.A{constructor(e,t){super(e),this.store=[],this.config={...History.defaultConfig,...t}}get current(){return this.store[this.store.length-1]}get length(){return this.store.length}get componentHooks(){return this.meta.hooks}initIndex(e={stage:c,options:{}}){var t;this.store.length>0?(null===(t=this.store[0].content)||void 0===t||t.el.removeAttribute("data-page"),this.store[0]=e):this.store.push(e);this.calculateCurrentPage()}push(e,t){var s,o;const{block:i}=this;if(null==i)return;const n=null===(o=this.current)||void 0===o||null===(s=o.content)||void 0===s?void 0:s.el,l=this.initPage(e);if(!(null==l?void 0:l.content.el))throw new ReferenceError(`A page for the stage "${e}" is not defined`);if("true"===i.getElementMod(l.content.el,"page","below")||n===l.content.el)throw new Error(`A page for the stage "${e}" is already opened`);this.async.requestAnimationFrame((()=>{i.setElementMod(l.content.el,"page","turning","in"),i.setElementMod(n,"page","below",!0),this.ctx.setMod("blankHistory",!1)}),{label:d.addNewPage}),this.store.push({stage:e,options:t,...l}),this.scrollToTop(),this.ctx.emit("history:transition",{page:this.current,type:"push"})}back(){if(1===this.store.length)return;const e=this.store.pop();if(e){var t,s;1===this.store.length&&this.ctx.setMod("blankHistory",!0),this.unwindPage(e);const o=null===(t=this.store[this.store.length-1].content)||void 0===t?void 0:t.el;null===(s=this.block)||void 0===s||s.removeElementMod(o,"page","below"),this.ctx.emit("history:transition",{page:e,type:"back"})}return e}clear(){var e;if(0===this.store.length)return!1;for(let s=this.store.length-1;s>=0;s--)this.unwindPage(this.store[s]);this.store=[],this.async.requestAnimationFrame((()=>{var e,t,s;null===(s=this.block)||void 0===s||s.removeElementMod(null===(t=this.store[0])||void 0===t||null===(e=t.content)||void 0===e?void 0:e.el,"page","below")}),{label:d.pageChange});const t=null===(e=this.block)||void 0===e?void 0:e.element("history");return(null==t?void 0:t.hasAttribute("data-page"))&&t.removeAttribute("data-page"),this.async.requestAnimationFrame((()=>{this.ctx.setMod("blankHistory",!0),this.ctx.emit("history:clear")}),{label:d.historyClear}),!0}calculateCurrentPage(){this.async.requestAnimationFrame((()=>{var e,t,s;const{current:o}=this;if(null==o)return;const i=this.initPage(o.stage);Object.assign(this.current,i);const n=(null===(t=o.title)||void 0===t||null===(e=t.initBoundingRect)||void 0===e?void 0:e.height)??0,l=n-((null===(s=o.content)||void 0===s?void 0:s.el.scrollTop)??0)>=n*this.config.titleThreshold;this.initTitleInView(l)}),{label:d.calculateCurrentPage})}unwindPage(e){var t,s;const o=null===(t=e.content)||void 0===t?void 0:t.el,i=null===(s=e.content)||void 0===s?void 0:s.trigger,n={group:e.stage.camelize(),label:d.unwindPage};this.async.requestAnimationFrame((()=>{const{block:e}=this;i&&this.setObserving(i,!1),null!=o&&null!=e&&(e.removeElementMod(o,"page","turning"),e.removeElementMod(o,"page","below"))}),n)}createTrigger(){if(!this.config.pageTriggers)return;const e=document.createElement("div");return e.setAttribute(this.config.triggerAttr,"true"),this.async.requestAnimationFrame((()=>{Object.assign(e.style,{height:1..px,width:"100%",position:"absolute",top:0,zIndex:-1})}),{label:d.createTrigger}),e}setObserving(e,t){if(!this.config.pageTriggers)return;const s={label:d.setObserving};if(t){const t=()=>this.onPageTopVisibilityChange(!0);r.watch(e,{threshold:this.config.titleThreshold,onLeave:()=>this.onPageTopVisibilityChange(!1)},t),this.async.worker((()=>r.unwatch(e,t)),s)}else this.async.terminateWorker(s)}initPage(e){var t;const{async:s,block:o}=this;if(null==o)return;let i=null===(t=o.node)||void 0===t?void 0:t.querySelector(`[data-page=${e}]`);if(null==i){if(this.ctx.emit("history:initPageFail",e),e!==c)return;if(i=o.element("history"),null==i)return;i.setAttribute("data-page",e)}this.async.requestAnimationFrame((()=>{if(null==i)return;const e=o.getFullElementName("page");i.classList.contains(e)||i.classList.add(e)}),{label:d.initPage});const n=i.querySelector("[data-title]"),l=Object.get(i,"children.0"),r=Boolean(null==l?void 0:l.getAttribute(this.config.triggerAttr)),a=r?l:this.createTrigger();null!=n&&(null!=a&&this.async.requestAnimationFrame((()=>{a.style.height=n.clientHeight.px}),{label:d.setTriggerHeight}),s.on(n,"click",this.onTitleClick.bind(this))),null!=a&&this.async.requestAnimationFrame((()=>{r||null==i||i.insertAdjacentElement("afterbegin",a),this.setObserving(a,!0)}),{label:d.initTrigger});const h={content:{el:i,initBoundingRect:i.getBoundingClientRect(),trigger:a},title:{el:n,initBoundingRect:null==n?void 0:n.getBoundingClientRect()}};return this.ctx.emit("history:initPage",h),h}scrollToTop(e=!1){var t;const s=null===(t=this.current)||void 0===t?void 0:t.content;if(null!=s&&(0!==s.el.scrollTop||0!==s.el.scrollLeft)){const t={top:0,left:0};e&&Object.assign(t,{behavior:"smooth"}),s.el.scrollTo(t)}}initTitleInView(e){var t,s;const{current:o}=this;null===(s=this.block)||void 0===s||s.setElementMod(null==o||null===(t=o.title)||void 0===t?void 0:t.el,"title","in-view",e),this.ctx.emit("history:titleInView",e)}onPageTopVisibilityChange(e){var t,s;(null===(s=this.current)||void 0===s||null===(t=s.title)||void 0===t?void 0:t.el)&&this.initTitleInView(e),this.ctx.onPageTopVisibilityChange(e)}onTitleClick(){this.scrollToTop(!0)}}History.defaultConfig={titleThreshold:.01,triggerAttr:"data-history-trigger",pageTriggers:!0},History.mods={blankHistory:["false",["true"]]};var h=s(50763),p=s(10497),u=s(29843),g=s(96596),m=s(27385);const v=Object.createDict({full:!0,content:!0});let y=class iBottomSlideProps extends m.default{constructor(){super(...arguments),this.heightMode="full",this.stepsProp=[],this.visible=0,this.maxVisiblePercent=90,this.fastSwipeDelay=.3.seconds(),this.fastSwipeThreshold=10,this.swipeThreshold=40,this.overlay=!0,this.maxOpacity=.8,this.scrollToTopOnClose=!0,this.forceInnerRender=!0,this.hideIfOffline=!1}};(0,o.Cg)([(0,m.prop)({type:String,validator:Object.hasOwnProperty(v)})],y.prototype,"heightMode",void 0),(0,o.Cg)([(0,m.prop)({type:Array,validator:e=>e.every((e=>e>=0&&e<=100))})],y.prototype,"stepsProp",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:Number.isNonNegative})],y.prototype,"visible",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:e=>e>=0&&e<=100})],y.prototype,"maxVisiblePercent",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:Number.isPositive})],y.prototype,"fastSwipeDelay",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:Number.isNatural})],y.prototype,"fastSwipeThreshold",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:Number.isNatural})],y.prototype,"swipeThreshold",void 0),(0,o.Cg)([(0,m.prop)(Boolean)],y.prototype,"overlay",void 0),(0,o.Cg)([(0,m.prop)({type:Number,validator:Number.isBetweenZeroAndOne})],y.prototype,"maxOpacity",void 0),(0,o.Cg)([(0,m.prop)(Boolean)],y.prototype,"scrollToTopOnClose",void 0),(0,o.Cg)([(0,m.prop)(Boolean)],y.prototype,"forceInnerRender",void 0),(0,o.Cg)([(0,m.prop)(Boolean)],y.prototype,"hideIfOffline",void 0),y=(0,o.Cg)([(0,m.component)({partial:"bBottomSlide",layer:"@v4fire/client"})],y);const f=y,b=(0,i.A)(["performMovingAnimation"]);class Animation extends a.A{constructor(){super(...arguments),this.isPositionUpdating=!1,this.diff=0}get shouldUseRAF(){return!1===this.ctx.browser.is.iOS}startMoving(e){this.isPositionUpdating&&this.shouldUseRAF||this.performMoving(),this.diff+=e}stopMoving(){this.async.clearAnimationFrame({label:b.performMovingAnimation}),this.isPositionUpdating=!1,this.diff=0}performMoving(){this.isPositionUpdating=!0,this.shouldUseRAF?this.async.requestAnimationFrame((()=>{this.isPositionUpdating&&(this.updateKeyframeValues(),this.performMoving())}),{label:b.performMovingAnimation}):this.updateKeyframeValues()}updateKeyframeValues(){const{ctx:e}=this,{windowHeight:t,offset:s}=e.geometry;t>=s+this.diff&&(e.geometry.incrementOffset(this.diff),e.isPulling=!0,e.updateWindowPosition()),e.overlayAPI.animateOpacityKeyframe(),this.diff=0}}const w=(0,i.A)(["performOpacity","updateOpacity"]);class Overlay extends a.A{constructor(){super(...arguments),this.opacity=0}setOpacity(e){this.opacity=e,this.updateOverlayStyle()}animateOpacityKeyframe(){return this.ctx.waitComponentStatus("ready",(()=>{const{ctx:e}=this,{$refs:{overlay:t},maxOpacity:s,geometry:o}=e;if(null!=t||s<0)return;const i=o.getStepOffset(e.stepCount-1),n=o.getStepOffset(e.stepCount-2),{offset:l}=o;if(!Object.isNumber(n)||n>l)return;const r=s-s/100*((i-l)/((i-n)/100)),a=Math.min(r,s);Math.abs(this.opacity-a)>=.025&&this.setOpacity(a)}),{label:w.performOpacity})}updateOverlayStyle(){return this.ctx.waitComponentStatus("ready",(()=>{const{overlay:e}=this.ctx.$refs;e instanceof HTMLElement&&e.style.setProperty("opacity",String(this.opacity))}),{label:w.updateOpacity})}}const C=(0,i.A)(["initGeometry"]);class geometry_Geometry extends a.A{constructor(){super(...arguments),this.offsetStore=0,this.stepsInPixels=[],this.windowHeightStore=0,this.contentHeightStore=0,this.contentMaxHeightStore=0}get windowHeight(){return 0===this.windowHeightStore&&(this.windowHeightStore=document.documentElement.clientHeight),this.windowHeightStore}get contentHeight(){return this.contentHeightStore}get contentMaxHeight(){return this.contentMaxHeightStore}get offset(){return this.offsetStore}set offset(e){const t=this.lastStepOffset;null!=t&&e>t&&(e=t),this.offsetStore=e,this.ctx.swipeControl.notifyOffsetChanged(e)}get lastStepOffset(){return this.stepsInPixels[this.stepsInPixels.length-1]}get currentStepOffset(){return this.stepsInPixels[this.ctx.step]}setOffset(e){this.offset=e}incrementOffset(e){this.offset+=e}getStepOffset(e){return this.stepsInPixels[e]??0}setOffsetForStep(e){this.offset=this.stepsInPixels[e]}async init(){var e;const{ctx:t}=this;this.windowHeightStore=document.documentElement.clientHeight;const[s,o,i,n]=await Promise.all([t.waitRef("header",{label:C.initGeometry}),t.waitRef("content"),t.waitRef("view"),t.waitRef("window")]),{maxVisiblePercent:l}=t,r=null===(e=t.history.current)||void 0===e?void 0:e.content;if("content"===t.heightMode&&null!=(null==r?void 0:r.initBoundingRect)){const e=r.el.scrollHeight;o.clientHeight!==e&&(o.style.height=e.px)}const a=this.windowHeight*(l/100),c=i.clientHeight+s.clientHeight;this.contentHeightStore=Math.min(c,a),this.contentMaxHeightStore=a,r&&Object.assign(r.el.style,{maxHeight:(0===a?0:a-s.clientHeight).px}),Object.assign(n.style,{maxHeight:0===a?void 0:a.px}),this.bakeSteps()}bakeSteps(){this.stepsInPixels=this.ctx.steps.map((e=>e/100*this.windowHeight))}}class Geometry extends geometry_Geometry{constructor(){super(...arguments),this.bottomOffsetStore=0}get bottomOffset(){return this.bottomOffsetStore}setBottomOffset(e){this.bottomOffsetStore=e}bakeSteps(){this.stepsInPixels=this.ctx.steps.map(((e,t)=>e/100*this.windowHeight+(0===t?0:this.bottomOffset)))}}class SwipeControl extends a.A{constructor(){super(...arguments),this.direction=0,this.startTime=0,this.startY=0,this.currentY=0,this.endY=0,this.byTrigger=!1}notifyOffsetChanged(e){this.endY=e}onPullStart(e,t=!1){const s=e.touches[0];this.byTrigger=t,this.startY=s.clientY,this.startTime=performance.now()}onPull(e){const{ctx:t}=this,{geometry:s}=t,{clientY:o}=e.touches[0],i=this.currentY>0?this.currentY-o:0;this.currentY=o,this.direction=Math.sign(i);if(this.byTrigger||!t.isFullyOpened||t.isViewportTopReached&&(this.direction<0||s.offset<s.lastStepOffset))return t.animation.startMoving(i),void(e.cancelable&&(e.preventDefault(),e.stopPropagation()));t.animation.stopMoving()}onPullEnd(){if(0===this.currentY)return;const{ctx:e}=this,t=Math.abs(this.startY-this.endY),s=performance.now()-this.startTime<=e.fastSwipeDelay&&t>=e.fastSwipeThreshold,o=s&&(!e.isFullyOpened||e.isViewportTopReached||this.byTrigger),i=!s&&t>=e.swipeThreshold;e.animation.stopMoving(),this.moveToClosest(o,i),this.endY+=this.startY-this.currentY,this.byTrigger=!1,this.currentY=0}moveToClosest(e,t){const{direction:s,ctx:o}=this,{geometry:i}=o;if("content"===o.heightMode)!e&&t?o[i.contentHeight/2<i.offset?"next":"prev"]():e&&o[s>0?"next":"prev"]();else{let t=0;if(e){let e=0;for(;e<o.stepCount;e++){if(i.getStepOffset(e)>i.offset)break}t=s>0?e>o.stepCount-1?e-1:e:0===e?e:e-1}else{let e;for(let s=0;s<o.stepCount;s++){const o=Math.abs(i.offset-i.getStepOffset(s));(!Object.isNumber(e)||e>o)&&(e=o,t=s)}}const n=o.step;0===t?o.close().catch(stderr):0===n?o.open(t).catch(stderr):o.step=t}o.stickToStep()}}var S=s(40048);s(64512);const P=(0,i.A)(["lock","updateWindowPosition","syncStateDefer","onStepChange","waitAnimationToFinish"]);g.Ay.addToPrototype({getFullElementName:g.B0});let A=class bBottomSlide extends f{constructor(){super(...arguments),this.stepStore=0,this.isViewportTopReached=!0,this.isStepTransitionInProgress=!1,this.isPullingStore=!1}get unsafe(){return Object.cast(this)}get isFullyOpened(){return this.step===this.stepCount-1}get isClosed(){return 0===this.step}get steps(){const e=[this.visibleInPercent];return"content"===this.heightMode?e.push(this.geometry.contentHeight/this.geometry.windowHeight*100):e.push(this.maxVisiblePercent),e.concat(this.field.get("stepsStore")).sort(((e,t)=>e-t))}get stepCount(){return 2+this.stepsStore.length}get step(){return this.stepStore}set step(e){e!==this.step&&(this.stepStore=e,this.emit("stepChange",e))}get isPulling(){return this.isPullingStore}set isPulling(e){this.isPullingStore!==e&&(this.isPullingStore=e,this[e?"setRootMod":"removeRootMod"]("fullscreen-moving",!0),this[e?"setMod":"removeMod"]("stick",!1),this.emit("moveStateChange",e))}get visibleInPercent(){return 0===this.geometry.windowHeight?0:this.visible/this.geometry.windowHeight*100}onPageTopVisibilityChange(e){this.isViewportTopReached=e}lockPageScroll(){return h.A.lockPageScroll(this,this.$refs.view)}async open(e){if(void 0!==e&&e>this.stepCount-1)return!1;0===this.visible&&(this.removeMod("hidden",!0),await p.A.open(this));const t=this.step;return this.step=e??1,0===t&&this.history.initIndex(),this.emit("open"),!0}async close(){return this.isClosed?(this.history.length>1&&this.history.clear(),!1):(this.step=0,0===this.visible&&(p.A.close(this).catch(stderr),await this.setMod("hidden",!0)),this.history.clear(),this.emit("close"),!0)}async next(){return!this.isFullyOpened&&(0===this.step?this.open():(this.step++,!0))}async prev(){if(this.isClosed)return!1;const e=this.step-1;return 0===e?this.close():(this.step=e,!0)}async onKeyClose(){}async onTouchClose(){}initModEvents(){super.initModEvents(),this.sync.mod("heightMode","heightMode",String),this.sync.mod("visible","visible",Boolean),this.sync.mod("opened","visible",Boolean)}async initGeometry(){await this.geometry.init(),this.initOffset()}initOffset(){this.geometry.setOffset(this.visible),this.updateWindowPosition()}initHiddenState(){0===this.visible&&this.setMod("hidden",!0)}stickToStep(){this.isPulling=!1,this.geometry.setOffsetForStep(this.step),this.animation.stopMoving(),this.updateWindowPosition(),this.overlayAPI.setOpacity(this.isFullyOpened?this.maxOpacity:0)}async updateWindowPosition(){(await this.waitRef("window")).style.transform=`translate3d(0, ${(-this.geometry.offset).px}, 0)`}async recalculateState(){try{await this.async.sleep(50,{label:P.syncStateDefer,join:!0}),await this.initGeometry(),this.stickToStep()}catch{}}onHistoryClear(){this.$refs.content.style.removeProperty("height")}onStepChange(){n.Ay.all([this.waitRef("window",{label:P.onStepChange}),this.waitRef("view")]).then((([e,t])=>{this.isStepTransitionInProgress=!0,this.async.once(e,"transitionend",(()=>{this.isFullyOpened?(this.lockPageScroll().catch(stderr),this.removeMod("events",!1)):(this.unlockPageScroll().catch(stderr),this.setMod("events",!1),this.scrollToTopOnClose&&t.scrollTo(0,0)),this.isStepTransitionInProgress=!1}),{group:":zombie",label:P.waitAnimationToFinish}),this.stickToStep()})).catch(stderr)}};A.mods={...p.A.mods,...u.A.mods,stick:[["true"],"false"],events:["true",["false"]],heightMode:["content","full"]},(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"isFullyOpened",null),(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"isClosed",null),(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"steps",null),(0,o.Cg)([(0,m.computed)({cache:!0,dependencies:["stepsStore"]})],A.prototype,"stepCount",null),(0,o.Cg)([(0,m.system)((e=>new History(Object.cast(e))))],A.prototype,"history",void 0),(0,o.Cg)([(0,m.system)()],A.prototype,"stepStore",void 0),(0,o.Cg)([(0,m.field)((e=>e.sync.link("stepsProp",(e=>e.slice().sort(((e,t)=>e-t))))))],A.prototype,"stepsStore",void 0),(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"step",null),(0,o.Cg)([(0,m.system)()],A.prototype,"isViewportTopReached",void 0),(0,o.Cg)([(0,m.system)()],A.prototype,"isStepTransitionInProgress",void 0),(0,o.Cg)([(0,m.system)()],A.prototype,"isPullingStore",void 0),(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"isPulling",null),(0,o.Cg)([(0,m.computed)({cache:!1})],A.prototype,"visibleInPercent",null),(0,o.Cg)([(0,m.system)((e=>new Animation(e)))],A.prototype,"animation",void 0),(0,o.Cg)([(0,m.system)((e=>new SwipeControl(e)))],A.prototype,"swipeControl",void 0),(0,o.Cg)([(0,m.system)((e=>new Geometry(e)))],A.prototype,"geometry",void 0),(0,o.Cg)([(0,m.system)((e=>new Overlay(e)))],A.prototype,"overlayAPI",void 0),(0,o.Cg)([(0,m.wait)("ready",{label:P.lock})],A.prototype,"lockPageScroll",null),(0,o.Cg)([(0,m.wait)("ready")],A.prototype,"open",null),(0,o.Cg)([(0,m.hook)("mounted"),(0,m.wait)("ready")],A.prototype,"initGeometry",null),(0,o.Cg)([(0,m.watch)("visible")],A.prototype,"initOffset",null),(0,o.Cg)([(0,m.hook)("created")],A.prototype,"initHiddenState",null),(0,o.Cg)([(0,m.wait)("ready",{label:P.updateWindowPosition})],A.prototype,"updateWindowPosition",null),(0,o.Cg)([(0,m.watch)(":history:transition"),(0,m.wait)("ready")],A.prototype,"recalculateState",null),(0,o.Cg)([(0,m.watch)(":history:clear")],A.prototype,"onHistoryClear",null),(0,o.Cg)([(0,m.watch)(":stepChange"),(0,m.hook)("mounted"),(0,m.wait)("ready")],A.prototype,"onStepChange",null),A=(0,o.Cg)([(0,m.component)({layer:"@v4fire/client"}),(0,l.C)(h.A,p.A)],A);const T=A;s(64512);let O=class bBottomSlide extends T{constructor(){super(...arguments),this.lockScroll=!0}get isContentOverflowing(){const{documentElement:e}=document,{$refs:{content:t,header:s},mods:{contentOffset:o},isStepTransitionInProgress:i}=this,n="true"===o&&i?20:0;return t.scrollHeight+n>e.clientHeight*(this.maxVisiblePercent/100)-s.clientHeight}lockPageScroll(){return this.lockScroll?super.lockPageScroll():Promise.resolve()}async open(e){const t=this.step,s=await super.open(e);if(s&&(this.lockNativeScroll(!0),0===t)){const e=this.field.get("externalAnalyticsParams.slug")??this.field.get("externalAnalyticsParams.Slug");(this.field.get("externalAnalyticsParams.eventName")??e)&&this.analytics.sendEvent("appear",this.externalAnalyticsParams,"dialog")}return s}async close(){if(!this.isClosed){const e=this.field.get("externalAnalyticsParams.slug")??this.field.get("externalAnalyticsParams.Slug");(this.field.get("externalAnalyticsParams.eventName")??e)&&this.analytics.sendEvent("close",this.externalAnalyticsParams,"dialog")}const e=await super.close();return e&&this.lockNativeScroll(!1),e}get isHeaderEmpty(){return null==this.$slots.header&&!Object.isString(this.title)&&"false"===this.mods.showStripe}initOffset(){this.geometry.setOffset(this.visible+this.geometry.bottomOffset),this.updateWindowPosition()}lockNativeScroll(e){0}visibleHeightChanged(){return this.isClosed,Promise.resolve()}};O.mods={...T.mods,progress:["true","false"],contentOffset:["true",["false"]],topBorderRadius:[["s"],"m","xl"],dynamicToggler:["true",["false"]],showStripe:[["true"],"false"],hideWithDelay:[["true"],"false"]},(0,o.Cg)([(0,S.prop)({type:String,required:!1})],O.prototype,"title",void 0),(0,o.Cg)([(0,S.prop)({type:Boolean})],O.prototype,"lockScroll",void 0),(0,o.Cg)([(0,S.hook)("mounted"),(0,S.watch)("visible")],O.prototype,"initOffset",null),(0,o.Cg)([(0,S.watch)("!globalEmitter:native.ui.visibleHeightChanged")],O.prototype,"visibleHeightChanged",null),O=(0,o.Cg)([(0,S.component)({layer:"@edadeal/core"})],O);const x=O},50611:(e,t,s)=>{"use strict";s.d(t,{B1:()=>r,al:()=>a,mk:()=>c});var o=s(7620),i=s(7865);const n=new i.EventEmitter2({verboseMemoryLeak:!1}),l=new Map;async function r(e,t,s,o){if(Object.isString(s)){const e=o,i=[t,s,o];o=Object.get(l,i)??(t=>{t.type===s&&e(t.data)}),Object.set(l,i,o)}else o=s;let i;try{i=await e.call("pubsub.subscribe",t)}catch(r){i=!1}return i&&n.on(t,o),i}async function a(e,t,s,o){Object.isString(s)&&(o=Object.get(l,[t,s,o])),null!=o&&(n.off(t,o),Object.isString(s)&&!n.listeners(t).includes(o)&&Object.delete(l,[t,s,o]),n.hasListeners(t)||await e.call("pubsub.unsubscribe",t))}async function c(e,t,s,o){const i={topic:t,message:{type:s,data:o}};await e.call("pubsub.publish",i)}o.Q.on("native.pubsub.next",(({topic:e,message:t})=>{n.emit(e,t)}))},34325:(e,t,s)=>{"use strict";s.d(t,{CQ:()=>i,M1:()=>n,gn:()=>o});const o="isTooltipShownKey",i=10,n=10},86893:(e,t,s)=>{"use strict";s.d(t,{GG:()=>AdultRequest,Ay:()=>iAdultRequest});var o=s(27663),i=s(50611),n=s(8499),l=s(31635),r=s(10750);let a=class Claim extends r.Ay{constructor(){super(...arguments),this.baseURL="/claim"}};a=(0,l.Cg)([(0,r.Mn)("claims")],a);const c=a;var d=s(73756);const h="adultContentAllowed",p="agreement-18-plus",u="adult-request-async-group",g=(0,d.A)();class AdultRequest extends n.A{constructor(e){super(e),this.provider=this.ctx.createDataProviderInstance(c),this.component.once("componentStatus:ready",(()=>{this.initAdultContentAllowance(),this.component.watch("r.isAuth",{label:g.adultRequestAuthWatcher,group:u},(()=>this.initAdultContentAllowance()))}),{label:g.adultRequestReadyStatusWaiter,group:u})}async initAdultContentAllowance(){if(!this.component.r.isAuth)return this.setAdultContentAllowance(!1),void this.initAdultContentPubsubListener();try{const e=await this.async.request(this.provider.get({slug:p}),{join:"replace",label:g.adultRequestAcceptanceGetRequest,group:u});this.provider.dropCache();const t=await e.data;null!=t&&this.setAdultContentAllowance(t.accepted)}catch(e){stderr(e)}this.initAdultContentPubsubListener()}async allowAdultContent(){const{component:e}=this;try{e.r.isAuth&&await this.async.request(this.provider.post(void 0,{query:{slug:p}}),{join:"replace",label:g.adultRequestAcceptancePostRequest,group:u})}catch(t){stderr(t)}finally{this.setAdultContentAllowance(!0),o.Zu.hasSupport("pubsub.publish")&&(0,i.mk)(e.remoteState.bridge,"edadeal.mobile.webapp.ageConfirmation","status.change",{status:!0}).catch(stderr)}}get isAdultContentAllowed(){return Boolean(this.component.r.getFromStore(h))}initAdultContentPubsubListener(){const{component:e}=this;o.Zu.hasSupport("pubsub.subscribe")&&(0,i.B1)(e.remoteState.bridge,"edadeal.mobile.webapp.ageConfirmation",(({data:{status:t}})=>{e.r.native.execWhenAppBecomesVisible(e,(()=>{this.setAdultContentAllowance(t),this.provider.dropCache()}),{label:g.waitVisibilityAndEmitAdultContentAllowance,group:u})})).catch(stderr)}setAdultContentAllowance(e){const{component:t}=this;e!==t.r.getFromStore(h)&&(t.r.setToStore(h,e),t.unsafe.r.emit("adultContentChange",e))}}class iAdultRequest{}},61153:function(e,t){var s;(s=t)["i-history"]instanceof Object==0&&(s["i-history"]={}),s["b-bottom-slide_v4"]instanceof Object==0&&(s["b-bottom-slide_v4"]={}),s["b-bottom-slide"]instanceof Object==0&&(s["b-bottom-slide"]={}),s["b-bottom-slide_v4"].index=function(){return function(e,t){const{resolveDirective:s,withDirectives:o,openBlock:i,createElementBlock:n,createCommentVNode:l,createElementVNode:r,renderSlot:a,normalizeClass:c,createTextVNode:d,Teleport:h,createBlock:p}=e.$renderEngine.r,u=e.$renderEngine.r.resolveAttrs.call(e,{props:{key:0,class:"i-block-helper b-bottom-slide-v4","data-teleport":""}}).props,g=["v-attrs"],m=[r.call(e,"div",{class:"b-bottom-slide-v4__toggler-stripe","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"toggler-stripe"},[r.call(e,"div",{class:"b-bottom-slide-v4__toggler","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"toggler"})],-1)];function v(){let v,y,f;const b=s.call(e,"async-target");return e.r.shouldMountTeleports?(i.call(e),n.call(e,"span",u,[(i.call(e),p.call(e,h,{to:"#teleports"},[o.call(e,(i.call(e),n.call(e,"div",{class:"i-block-helper","data-cached-dynamic-class":'["call", "provide.componentClasses", "b-bottom-slide-v4", ["get", "mods"]]',ref:e.$resolveRef(e.$resolveRef("$el")),"data-cached-class-component-id":"true","v-attrs":e.rootAttrs},[e.overlay?o.call(e,(i.call(e),n.call(e,"div",{key:0,class:"b-bottom-slide-v4__overlay",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t)),"data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"overlay",ref:e.$resolveRef("overlay"),"data-has-v-on-directives":""},null,512)),[[v=v||s.call(e,"ref"),"overlay"]]):l.call(e,"",!0),d.call(e),e.forceInnerRender||e.opt.ifOnce("opened","true"===e.m.opened)&&delete e.reactiveModsStore.opened?o.call(e,(i.call(e),n.call(e,"div",{key:1,class:"b-bottom-slide-v4__window","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"window",ref:e.$resolveRef("window")},[o.call(e,(i.call(e),n.call(e,"header",{class:"b-bottom-slide-v4__header",onTouchstart:t[1]||(t[1]=t=>e.swipeControl.onPullStart(t,!0)),onTouchmove:t[2]||(t[2]=(...t)=>e.swipeControl.onPull&&e.swipeControl.onPull(...t)),onTouchend:t[3]||(t[3]=(...t)=>e.swipeControl.onPullEnd&&e.swipeControl.onPullEnd(...t)),"data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"header",ref:e.$resolveRef("header"),"data-has-v-on-directives":""},m,32)),[[v=v||s.call(e,"ref"),"header"]]),d.call(e),o.call(e,(i.call(e),n.call(e,"div",{class:"b-bottom-slide-v4__view",onTouchstart:t[4]||(t[4]=(...t)=>e.swipeControl.onPullStart&&e.swipeControl.onPullStart(...t)),onTouchmove:t[5]||(t[5]=(...t)=>e.swipeControl.onPull&&e.swipeControl.onPull(...t)),onTouchend:t[6]||(t[6]=(...t)=>e.swipeControl.onPullEnd&&e.swipeControl.onPullEnd(...t)),"data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"view",ref:e.$resolveRef("view"),"data-has-v-on-directives":""},[o.call(e,(i.call(e),n.call(e,"div",{class:"b-bottom-slide-v4__content","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"content",ref:e.$resolveRef("content")},[r.call(e,"div",{class:c.call(e,["b-bottom-slide-v4__history",[e.componentId]])},[a.call(e,e.$slots,"default",{stage:e.stage,ctx:e.self})],2)])),[[v=v||s.call(e,"ref"),"content"]])],32)),[[y=y||s.call(e,"on-resize"),{handler:e.recalculateState}],[v=v||s.call(e,"ref"),"view"]])])),[[v=v||s.call(e,"ref"),"window"]]):l.call(e,"",!0)],8,g)),[[f=f||s.call(e,"tag"),"rootTag"in e.self&&e.rootTag||"div"],[b,!e.ssrRendering],[v=v||s.call(e,"ref"),e.$resolveRef("$el")]])]))])):l.call(e,"",!0)}return v}},s["b-bottom-slide"].index=function(){return function(e,t){const{resolveDirective:s,withDirectives:o,openBlock:i,createElementBlock:n,createCommentVNode:l,createElementVNode:r,renderSlot:a,toDisplayString:c,createTextVNode:d,normalizeClass:h,Teleport:p,createBlock:u}=e.$renderEngine.r,g=e.$renderEngine.r.resolveAttrs.call(e,{props:{key:0,class:"i-block-helper b-bottom-slide","data-teleport":""}}).props,m=["v-attrs"],v=r.call(e,"div",{class:"b-bottom-slide__toggler","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"toggler"},null,-1),y=e.$renderEngine.r.resolveAttrs.call(e,{props:{key:1,class:"b-bottom-slide__header-title","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"header-title"}}).props,f=e.$renderEngine.r.resolveAttrs.call(e,{props:{key:2,class:"b-bottom-slide__toggler-stripe","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"toggler-stripe"}}).props;function b(){let b,w,C;const S=s.call(e,"async-target");return e.r.shouldMountTeleports?(i.call(e),n.call(e,"span",g,[(i.call(e),u.call(e,p,{to:"#teleports"},[o.call(e,(i.call(e),n.call(e,"div",{class:"i-block-helper","data-cached-dynamic-class":'["call", "provide.componentClasses", "b-bottom-slide", ["get", "mods"]]',ref:e.$resolveRef(e.$resolveRef("$el")),"data-cached-class-component-id":"true","v-attrs":e.rootAttrs},[e.overlay?o.call(e,(i.call(e),n.call(e,"div",{key:0,class:"b-bottom-slide__overlay",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t)),"data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"overlay",ref:e.$resolveRef("overlay"),"data-has-v-on-directives":""},null,512)),[[b=b||s.call(e,"ref"),"overlay"]]):l.call(e,"",!0),d.call(e),e.forceInnerRender||e.opt.ifOnce("opened","true"===e.m.opened)&&delete e.reactiveModsStore.opened?o.call(e,(i.call(e),n.call(e,"div",{key:1,class:"b-bottom-slide__window","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"window",ref:e.$resolveRef("window")},[o.call(e,(i.call(e),n.call(e,"header",{class:h.call(e,e.provide.elementClasses({header:{empty:e.isHeaderEmpty}})),onTouchstart:t[1]||(t[1]=t=>e.swipeControl.onPullStart(t,!0)),onTouchmove:t[2]||(t[2]=(...t)=>e.swipeControl.onPull&&e.swipeControl.onPull(...t)),onTouchend:t[3]||(t[3]=(...t)=>e.swipeControl.onPullEnd&&e.swipeControl.onPullEnd(...t)),ref:e.$resolveRef("header"),"data-has-v-on-directives":""},[v,d.call(e),e.$slots.header?a.call(e,e.$slots,"header",{key:0,stage:e.stage,ctx:e.self}):Object.isString(e.title)?(i.call(e),n.call(e,"div",y,c.call(e,e.title),1)):(i.call(e),n.call(e,"div",f))],34)),[[b=b||s.call(e,"ref"),"header"]]),d.call(e),o.call(e,(i.call(e),n.call(e,"div",{class:"b-bottom-slide__view",onTouchstart:t[4]||(t[4]=(...t)=>e.swipeControl.onPullStart&&e.swipeControl.onPullStart(...t)),onTouchmove:t[5]||(t[5]=(...t)=>e.swipeControl.onPull&&e.swipeControl.onPull(...t)),onTouchend:t[6]||(t[6]=(...t)=>e.swipeControl.onPullEnd&&e.swipeControl.onPullEnd(...t)),"data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"view",ref:e.$resolveRef("view"),"data-has-v-on-directives":""},[o.call(e,(i.call(e),n.call(e,"div",{class:"b-bottom-slide__content","data-cached-class-component-id":"true","data-cached-class-provided-classes-styles":"content",ref:e.$resolveRef("content")},[r.call(e,"div",{class:h.call(e,["b-bottom-slide__history",[e.componentId]])},[a.call(e,e.$slots,"default",{stage:e.stage,ctx:e.self})],2)])),[[b=b||s.call(e,"ref"),"content"]])],32)),[[w=w||s.call(e,"on-resize"),{handler:e.recalculateState}],[b=b||s.call(e,"ref"),"view"]]),a.call(e,e.$slots,"afterView",{stage:e.stage,ctx:e.self})])),[[b=b||s.call(e,"ref"),"window"]]):l.call(e,"",!0)],8,m)),[[C=C||s.call(e,"tag"),"rootTag"in e.self&&e.rootTag||"div"],[S,!e.ssrRendering],[b=b||s.call(e,"ref"),e.$resolveRef("$el")]])]))])):l.call(e,"",!0)}return b}}}}]);